/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./apps/server/bucketvore/src/app/client/s3-explorer.client.ts":
/*!*********************************************************************!*\
  !*** ./apps/server/bucketvore/src/app/client/s3-explorer.client.ts ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   s3Explorer: () => (/* binding */ s3Explorer)\n/* harmony export */ });\n/* harmony import */ var _utils_clipboard_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils/clipboard.client */ \"./apps/server/bucketvore/src/app/client/utils/clipboard.client.ts\");\n/**\n * S3 Explorer Alpine.js Component\n * Client-side TypeScript with full IDE support\n */\n\nfunction s3Explorer() {\n    return {\n        // State\n        selectedBucket: '',\n        currentPrefix: '',\n        buckets: [],\n        files: [],\n        folders: [],\n        viewMode: 'list',\n        bucketsHtml: '<div class=\"loading\"><div class=\"spinner\"></div><p>Loading buckets...</p></div>',\n        filesHtml: '',\n        breadcrumbsHtml: '',\n        bucketFilter: '',\n        fileFilter: '',\n        showUpload: false,\n        showPreview: false,\n        uploadProgress: [],\n        uploadProgressHtml: '',\n        previewHtml: '',\n        activeTab: 'data',\n        // Computed properties\n        get filteredBucketsHtml() {\n            if (!this.bucketFilter.trim()) {\n                return this.bucketsHtml;\n            }\n            const parser = new DOMParser();\n            const doc = parser.parseFromString(this.bucketsHtml, 'text/html');\n            const bucketItems = doc.querySelectorAll('.bucket-item');\n            bucketItems.forEach((item) => {\n                const bucketName = item.querySelector('.bucket-name')?.textContent?.toLowerCase() || '';\n                if (bucketName.includes(this.bucketFilter.toLowerCase())) {\n                    item.style.display = '';\n                }\n                else {\n                    item.style.display = 'none';\n                }\n            });\n            const visibleCount = doc.querySelectorAll('.bucket-item:not([style*=\"display: none\"])').length;\n            if (visibleCount === 0) {\n                return '<div class=\"empty-state\"><div class=\"empty-state-icon\">üîç</div><p>No buckets match your filter</p></div>';\n            }\n            return doc.body.innerHTML;\n        },\n        get filteredFilesHtml() {\n            if (!this.fileFilter.trim() || !this.filesHtml) {\n                return this.filesHtml;\n            }\n            const parser = new DOMParser();\n            const doc = parser.parseFromString(this.filesHtml, 'text/html');\n            const fileItems = doc.querySelectorAll('.file-item');\n            fileItems.forEach((item) => {\n                const fileName = item.querySelector('.file-name')?.textContent?.toLowerCase() || '';\n                if (fileName.includes(this.fileFilter.toLowerCase())) {\n                    item.style.display = '';\n                }\n                else {\n                    item.style.display = 'none';\n                }\n            });\n            const visibleCount = doc.querySelectorAll('.file-item:not([style*=\"display: none\"])').length;\n            if (visibleCount === 0) {\n                return '<div class=\"empty-state\"><div class=\"empty-state-icon\">üîç</div><p>No files match your filter</p></div>';\n            }\n            return doc.body.innerHTML;\n        },\n        // Initialization\n        async init() {\n            await this.loadBuckets();\n        },\n        // API Methods\n        async loadBuckets() {\n            try {\n                const response = await fetch('/api/buckets');\n                this.bucketsHtml = await response.text();\n            }\n            catch (error) {\n                this.bucketsHtml = '<div class=\"error\"><div class=\"error-icon\">‚ö†Ô∏è</div><p>Error loading buckets</p></div>';\n            }\n        },\n        async selectBucket(bucketName) {\n            this.selectedBucket = bucketName;\n            this.currentPrefix = '';\n            this.fileFilter = '';\n            await this.loadFiles();\n        },\n        async loadFiles() {\n            try {\n                const params = new URLSearchParams({\n                    bucket: this.selectedBucket,\n                    prefix: this.currentPrefix\n                });\n                const response = await fetch(`/api/files?${params}`);\n                const data = await response.json();\n                this.filesHtml = data.filesHtml || '';\n                this.breadcrumbsHtml = data.breadcrumbsHtml || '';\n            }\n            catch (error) {\n                this.filesHtml = '<div class=\"error\"><div class=\"error-icon\">‚ö†Ô∏è</div><p>Error loading files</p></div>';\n            }\n        },\n        async navigateToFolder(prefix) {\n            this.currentPrefix = prefix;\n            this.fileFilter = '';\n            await this.loadFiles();\n        },\n        async previewFile(key) {\n            try {\n                const params = new URLSearchParams({\n                    bucket: this.selectedBucket,\n                    key: key\n                });\n                const response = await fetch(`/api/files/preview?${params}`);\n                this.previewHtml = await response.text();\n                this.showPreview = true;\n            }\n            catch (error) {\n                alert('Error loading preview');\n            }\n        },\n        closePreview() {\n            this.showPreview = false;\n            this.previewHtml = '';\n        },\n        async downloadFile(key) {\n            try {\n                const params = new URLSearchParams({\n                    bucket: this.selectedBucket,\n                    key: key\n                });\n                const response = await fetch(`/api/files/download?${params}`);\n                const data = await response.json();\n                window.open(data.url, '_blank');\n            }\n            catch (error) {\n                alert('Error generating download link');\n            }\n        },\n        async deleteFile(key) {\n            if (!confirm(`Delete ${key}?`))\n                return;\n            try {\n                await fetch(`/api/files/delete`, {\n                    method: 'POST',\n                    headers: { 'Content-Type': 'application/json' },\n                    body: JSON.stringify({ bucket: this.selectedBucket, key })\n                });\n                await this.loadFiles();\n            }\n            catch (error) {\n                alert('Error deleting file');\n            }\n        },\n        async copyS3Path(key) {\n            const element = event?.target;\n            await (0,_utils_clipboard_client__WEBPACK_IMPORTED_MODULE_0__.copyS3PathToClipboard)(this.selectedBucket, key, element);\n        },\n        async deleteFolder(prefix) {\n            if (!confirm(`Delete folder ${prefix} and all its contents?`))\n                return;\n            try {\n                await fetch(`/api/files/delete-folder`, {\n                    method: 'POST',\n                    headers: { 'Content-Type': 'application/json' },\n                    body: JSON.stringify({ bucket: this.selectedBucket, prefix })\n                });\n                await this.loadFiles();\n            }\n            catch (error) {\n                alert('Error deleting folder');\n            }\n        },\n        // Upload functionality\n        handleFileSelect(event) {\n            const input = event.target;\n            if (input.files) {\n                const files = Array.from(input.files);\n                this.uploadFiles(files);\n            }\n        },\n        handleDrop(event) {\n            event.target.classList.remove('drag-over');\n            if (event.dataTransfer?.files) {\n                const files = Array.from(event.dataTransfer.files);\n                this.uploadFiles(files);\n            }\n        },\n        async uploadFiles(files) {\n            this.uploadProgress = files.map(f => ({ name: f.name, status: 'Uploading...' }));\n            for (let i = 0; i < files.length; i++) {\n                const file = files[i];\n                const formData = new FormData();\n                formData.append('file', file);\n                formData.append('bucket', this.selectedBucket);\n                formData.append('prefix', this.currentPrefix);\n                try {\n                    await fetch('/api/upload', {\n                        method: 'POST',\n                        body: formData\n                    });\n                    this.uploadProgress[i].status = '‚úì Complete';\n                }\n                catch (error) {\n                    this.uploadProgress[i].status = '‚úó Failed';\n                }\n            }\n            setTimeout(async () => {\n                this.uploadProgress = [];\n                this.showUpload = false;\n                await this.loadFiles();\n            }, 2000);\n        },\n        async refresh() {\n            await this.loadFiles();\n        },\n        filterBuckets() {\n            // Reactive computed property handles this\n        },\n        filterFiles() {\n            // Reactive computed property handles this\n        }\n    };\n}\n// Auto-register with Alpine when it initializes\nif (typeof window !== 'undefined') {\n    // Register immediately if Alpine is already available\n    if (window.Alpine) {\n        window.Alpine.data('s3Explorer', s3Explorer);\n    }\n    else {\n        // Otherwise wait for Alpine to initialize\n        document.addEventListener('alpine:init', () => {\n            window.Alpine.data('s3Explorer', s3Explorer);\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9hcHBzL3NlcnZlci9idWNrZXR2b3JlL3NyYy9hcHAvY2xpZW50L3MzLWV4cGxvcmVyLmNsaWVudC50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBOzs7R0FHRztBQUU4RDtBQVMxRCxTQUFTLFVBQVU7SUFDeEIsT0FBTztRQUNMLFFBQVE7UUFDUixjQUFjLEVBQUUsRUFBRTtRQUNsQixhQUFhLEVBQUUsRUFBRTtRQUNqQixPQUFPLEVBQUUsRUFBRTtRQUNYLEtBQUssRUFBRSxFQUFFO1FBQ1QsT0FBTyxFQUFFLEVBQUU7UUFDWCxRQUFRLEVBQUUsTUFBTTtRQUNoQixXQUFXLEVBQUUsaUZBQWlGO1FBQzlGLFNBQVMsRUFBRSxFQUFFO1FBQ2IsZUFBZSxFQUFFLEVBQUU7UUFDbkIsWUFBWSxFQUFFLEVBQUU7UUFDaEIsVUFBVSxFQUFFLEVBQUU7UUFDZCxVQUFVLEVBQUUsS0FBSztRQUNqQixXQUFXLEVBQUUsS0FBSztRQUNsQixjQUFjLEVBQUUsRUFBc0I7UUFDdEMsa0JBQWtCLEVBQUUsRUFBRTtRQUN0QixXQUFXLEVBQUUsRUFBRTtRQUNmLFNBQVMsRUFBRSxNQUFNO1FBRWpCLHNCQUFzQjtRQUN0QixJQUFJLG1CQUFtQjtZQUNyQixJQUFJLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLEVBQUUsRUFBRSxDQUFDO2dCQUM5QixPQUFPLElBQUksQ0FBQyxXQUFXLENBQUM7WUFDMUIsQ0FBQztZQUVELE1BQU0sTUFBTSxHQUFHLElBQUksU0FBUyxFQUFFLENBQUM7WUFDL0IsTUFBTSxHQUFHLEdBQUcsTUFBTSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLFdBQVcsQ0FBQyxDQUFDO1lBQ2xFLE1BQU0sV0FBVyxHQUFHLEdBQUcsQ0FBQyxnQkFBZ0IsQ0FBQyxjQUFjLENBQUMsQ0FBQztZQUV6RCxXQUFXLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxFQUFFLEVBQUU7Z0JBQzNCLE1BQU0sVUFBVSxHQUFHLElBQUksQ0FBQyxhQUFhLENB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QUcsRUFBRTtZQUMzQyxNQUFjLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxZQUFZLEVBQUUsVUFBVSxDQUFDLENBQUM7UUFDeEQsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDO0FBQ0gsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL29uaXZvcm8vLi9hcHBzL3NlcnZlci9idWNrZXR2b3JlL3NyYy9hcHAvY2xpZW50L3MzLWV4cGxvcmVyLmNsaWVudC50cz8zM2RmIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogUzMgRXhwbG9yZXIgQWxwaW5lLmpzIENvbXBvbmVudFxuICogQ2xpZW50LXNpZGUgVHlwZVNjcmlwdCB3aXRoIGZ1bGwgSURFIHN1cHBvcnRcbiAqL1xuXG5pbXBvcnQgeyBjb3B5UzNQYXRoVG9DbGlwYm9hcmQgfSBmcm9tICcuL3V0aWxzL2NsaXBib2FyZC5jbGllbnQnO1xuaW1wb3J0IHR5cGUgeyBTM0NsaWVudFN0YXRlLCBVcGxvYWRQcm9ncmVzcyB9IGZyb20gJy4uL3NoYXJlZC90eXBlcy5zaGFyZWQnO1xuXG5kZWNsYXJlIGdsb2JhbCB7XG4gIGludGVyZmFjZSBXaW5kb3cge1xuICAgIEFscGluZTogYW55O1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzM0V4cGxvcmVyKCk6IFMzQ2xpZW50U3RhdGUgJiBSZWNvcmQ8c3RyaW5nLCBhbnk+IHtcbiAgcmV0dXJuIHtcbiAgICAvLyBTdGF0ZVxuICAgIHNlbGVjdGVkQnVja2V0OiAnJyxcbiAgICBjdXJyZW50UHJlZml4OiAnJyxcbiAgICBidWNrZXRzOiBbXSxcbiAgICBmaWxlczogW10sXG4gICAgZm9sZGVyczogW10sXG4gICAgdmlld01vZGU6ICdsaXN0JyxcbiAgICBidWNrZXRzSHRtbDogJzxkaXYgY2xhc3M9XCJsb2FkaW5nXCI+PGRpdiBjbGFzcz1cInNwaW5uZXJcIj48L2Rpdj48cD5Mb2FkaW5nIGJ1Y2tldHMuLi48L3A+PC9kaXY+JyxcbiAgICBmaWxlc0h0bWw6ICcnLFxuICAgIGJyZWFkY3J1bWJzSHRtbDogJycsXG4gICAgYnVja2V0RmlsdGVyOiAnJyxcbiAgICBmaWxlRmlsdGVyOiAnJyxcbiAgICBzaG93VXBsb2FkOiBmYWxzZSxcbiAgICBzaG93UHJldmlldzogZmFsc2UsXG4gICAgdXBsb2FkUHJvZ3Jlc3M6IFtdIGFzIFVwbG9hZFByb2dyZXNzW10sXG4gICAgdXBsb2FkUHJvZ3Jlc3NIdG1sOiAnJyxcbiAgICBwcmV2aWV3SHRtbDogJycsXG4gICAgYWN0aXZlVGFiOiAnZGF0YScsXG5cbiAgICAvLyBDb21wdXRlZCBwcm9wZXJ0aWVzXG4gICAgZ2V0IGZpbHRlcmVkQnVja2V0c0h0bWwoKTogc3RyaW5nIHtcbiAgICAgIGlmICghdGhpcy5idWNrZXRGaWx0ZXIudHJpbSgpKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJ1Y2tldHNIdG1sO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBwYXJzZXIgPSBuZXcgRE9NUGFyc2VyKCk7XG4gICAgICBjb25zdCBkb2MgPSBwYXJzZXIucGFyc2VGcm9tU3RyaW5nKHRoaXMuYnVja2V0c0h0bWwsICd0ZXh0L2h0bWwnKTtcbiAgICAgIGNvbnN0IGJ1Y2tldEl0ZW1zID0gZG9jLnF1ZXJ5U2VsZWN0b3JBbGwoJy5idWNrZXQtaXRlbScpO1xuXG4gICAgICBidWNrZXRJdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICAgIGNvbnN0IGJ1Y2tldE5hbWUgPSBpdGVtLnF1ZXJ5U2VsZWN0b3IoJy5idWNrZXQtbmFtZScpPy50ZXh0Q29udGVudD8udG9Mb3dlckNhc2UoKSB8fCAnJztcbiAgICAgICAgaWYgKGJ1Y2tldE5hbWUuaW5jbHVkZXModGhpcy5idWNrZXRGaWx0ZXIudG9Mb3dlckNhc2UoKSkpIHtcbiAgICAgICAgICAoaXRlbSBhcyBIVE1MRWxlbWVudCkuc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIChpdGVtIGFzIEhUTUxFbGVtZW50KS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgdmlzaWJsZUNvdW50ID0gZG9jLnF1ZXJ5U2VsZWN0b3JBbGwoJy5idWNrZXQtaXRlbTpub3QoW3N0eWxlKj1cImRpc3BsYXk6IG5vbmVcIl0pJykubGVuZ3RoO1xuICAgICAgaWYgKHZpc2libGVDb3VudCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gJzxkaXYgY2xhc3M9XCJlbXB0eS1zdGF0ZVwiPjxkaXYgY2xhc3M9XCJlbXB0eS1zdGF0ZS1pY29uXCI+8J+UjTwvZGl2PjxwPk5vIGJ1Y2tldHMgbWF0Y2ggeW91ciBmaWx0ZXI8L3A+PC9kaXY+JztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGRvYy5ib2R5LmlubmVySFRNTDtcbiAgICB9LFxuXG4gICAgZ2V0IGZpbHRlcmVkRmlsZXNIdG1sKCk6IHN0cmluZyB7XG4gICAgICBpZiAoIXRoaXMuZmlsZUZpbHRlci50cmltKCkgfHwgIXRoaXMuZmlsZXNIdG1sKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZpbGVzSHRtbDtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcGFyc2VyID0gbmV3IERPTVBhcnNlcigpO1xuICAgICAgY29uc3QgZG9jID0gcGFyc2VyLnBhcnNlRnJvbVN0cmluZyh0aGlzLmZpbGVzSHRtbCwgJ3RleHQvaHRtbCcpO1xuICAgICAgY29uc3QgZmlsZUl0ZW1zID0gZG9jLnF1ZXJ5U2VsZWN0b3JBbGwoJy5maWxlLWl0ZW0nKTtcblxuICAgICAgZmlsZUl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgICAgY29uc3QgZmlsZU5hbWUgPSBpdGVtLnF1ZXJ5U2VsZWN0b3IoJy5maWxlLW5hbWUnKT8udGV4dENvbnRlbnQ/LnRvTG93ZXJDYXNlKCkgfHwgJyc7XG4gICAgICAgIGlmIChmaWxlTmFtZS5pbmNsdWRlcyh0aGlzLmZpbGVGaWx0ZXIudG9Mb3dlckNhc2UoKSkpIHtcbiAgICAgICAgICAoaXRlbSBhcyBIVE1MRWxlbWVudCkuc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIChpdGVtIGFzIEhUTUxFbGVtZW50KS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgdmlzaWJsZUNvdW50ID0gZG9jLnF1ZXJ5U2VsZWN0b3JBbGwoJy5maWxlLWl0ZW06bm90KFtzdHlsZSo9XCJkaXNwbGF5OiBub25lXCJdKScpLmxlbmd0aDtcbiAgICAgIGlmICh2aXNpYmxlQ291bnQgPT09IDApIHtcbiAgICAgICAgcmV0dXJuICc8ZGl2IGNsYXNzPVwiZW1wdHktc3RhdGVcIj48ZGl2IGNsYXNzPVwiZW1wdHktc3RhdGUtaWNvblwiPvCflI08L2Rpdj48cD5ObyBmaWxlcyBtYXRjaCB5b3VyIGZpbHRlcjwvcD48L2Rpdj4nO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZG9jLmJvZHkuaW5uZXJIVE1MO1xuICAgIH0sXG5cbiAgICAvLyBJbml0aWFsaXphdGlvblxuICAgIGFzeW5jIGluaXQoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICBhd2FpdCB0aGlzLmxvYWRCdWNrZXRzKCk7XG4gICAgfSxcblxuICAgIC8vIEFQSSBNZXRob2RzXG4gICAgYXN5bmMgbG9hZEJ1Y2tldHMoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCcvYXBpL2J1Y2tldHMnKTtcbiAgICAgICAgdGhpcy5idWNrZXRzSHRtbCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHRoaXMuYnVja2V0c0h0bWwgPSAnPGRpdiBjbGFzcz1cImVycm9yXCI+PGRpdiBjbGFzcz1cImVycm9yLWljb25cIj7imqDvuI88L2Rpdj48cD5FcnJvciBsb2FkaW5nIGJ1Y2tldHM8L3A+PC9kaXY+JztcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgYXN5bmMgc2VsZWN0QnVja2V0KGJ1Y2tldE5hbWU6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgdGhpcy5zZWxlY3RlZEJ1Y2tldCA9IGJ1Y2tldE5hbWU7XG4gICAgICB0aGlzLmN1cnJlbnRQcmVmaXggPSAnJztcbiAgICAgIHRoaXMuZmlsZUZpbHRlciA9ICcnO1xuICAgICAgYXdhaXQgdGhpcy5sb2FkRmlsZXMoKTtcbiAgICB9LFxuXG4gICAgYXN5bmMgbG9hZEZpbGVzKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh7XG4gICAgICAgICAgYnVja2V0OiB0aGlzLnNlbGVjdGVkQnVja2V0LFxuICAgICAgICAgIHByZWZpeDogdGhpcy5jdXJyZW50UHJlZml4XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYC9hcGkvZmlsZXM/JHtwYXJhbXN9YCk7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgICAgdGhpcy5maWxlc0h0bWwgPSBkYXRhLmZpbGVzSHRtbCB8fCAnJztcbiAgICAgICAgdGhpcy5icmVhZGNydW1ic0h0bWwgPSBkYXRhLmJyZWFkY3J1bWJzSHRtbCB8fCAnJztcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHRoaXMuZmlsZXNIdG1sID0gJzxkaXYgY2xhc3M9XCJlcnJvclwiPjxkaXYgY2xhc3M9XCJlcnJvci1pY29uXCI+4pqg77iPPC9kaXY+PHA+RXJyb3IgbG9hZGluZyBmaWxlczwvcD48L2Rpdj4nO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBhc3luYyBuYXZpZ2F0ZVRvRm9sZGVyKHByZWZpeDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICB0aGlzLmN1cnJlbnRQcmVmaXggPSBwcmVmaXg7XG4gICAgICB0aGlzLmZpbGVGaWx0ZXIgPSAnJztcbiAgICAgIGF3YWl0IHRoaXMubG9hZEZpbGVzKCk7XG4gICAgfSxcblxuICAgIGFzeW5jIHByZXZpZXdGaWxlKGtleTogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHtcbiAgICAgICAgICBidWNrZXQ6IHRoaXMuc2VsZWN0ZWRCdWNrZXQsXG4gICAgICAgICAga2V5OiBrZXlcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgL2FwaS9maWxlcy9wcmV2aWV3PyR7cGFyYW1zfWApO1xuICAgICAgICB0aGlzLnByZXZpZXdIdG1sID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xuICAgICAgICB0aGlzLnNob3dQcmV2aWV3ID0gdHJ1ZTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGFsZXJ0KCdFcnJvciBsb2FkaW5nIHByZXZpZXcnKTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgY2xvc2VQcmV2aWV3KCk6IHZvaWQge1xuICAgICAgdGhpcy5zaG93UHJldmlldyA9IGZhbHNlO1xuICAgICAgdGhpcy5wcmV2aWV3SHRtbCA9ICcnO1xuICAgIH0sXG5cbiAgICBhc3luYyBkb3dubG9hZEZpbGUoa2V5OiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoe1xuICAgICAgICAgIGJ1Y2tldDogdGhpcy5zZWxlY3RlZEJ1Y2tldCxcbiAgICAgICAgICBrZXk6IGtleVxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAvYXBpL2ZpbGVzL2Rvd25sb2FkPyR7cGFyYW1zfWApO1xuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICB3aW5kb3cub3BlbihkYXRhLnVybCwgJ19ibGFuaycpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgYWxlcnQoJ0Vycm9yIGdlbmVyYXRpbmcgZG93bmxvYWQgbGluaycpO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBhc3luYyBkZWxldGVGaWxlKGtleTogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICBpZiAoIWNvbmZpcm0oYERlbGV0ZSAke2tleX0/YCkpIHJldHVybjtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgZmV0Y2goYC9hcGkvZmlsZXMvZGVsZXRlYCwge1xuICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgYnVja2V0OiB0aGlzLnNlbGVjdGVkQnVja2V0LCBrZXkgfSlcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IHRoaXMubG9hZEZpbGVzKCk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBhbGVydCgnRXJyb3IgZGVsZXRpbmcgZmlsZScpO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBhc3luYyBjb3B5UzNQYXRoKGtleTogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICBjb25zdCBlbGVtZW50ID0gKGV2ZW50IGFzIGFueSk/LnRhcmdldCBhcyBIVE1MRWxlbWVudCB8IHVuZGVmaW5lZDtcbiAgICAgIGF3YWl0IGNvcHlTM1BhdGhUb0NsaXBib2FyZCh0aGlzLnNlbGVjdGVkQnVja2V0LCBrZXksIGVsZW1lbnQpO1xuICAgIH0sXG5cbiAgICBhc3luYyBkZWxldGVGb2xkZXIocHJlZml4OiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgIGlmICghY29uZmlybShgRGVsZXRlIGZvbGRlciAke3ByZWZpeH0gYW5kIGFsbCBpdHMgY29udGVudHM/YCkpIHJldHVybjtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgZmV0Y2goYC9hcGkvZmlsZXMvZGVsZXRlLWZvbGRlcmAsIHtcbiAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IGJ1Y2tldDogdGhpcy5zZWxlY3RlZEJ1Y2tldCwgcHJlZml4IH0pXG4gICAgICAgIH0pO1xuICAgICAgICBhd2FpdCB0aGlzLmxvYWRGaWxlcygpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgYWxlcnQoJ0Vycm9yIGRlbGV0aW5nIGZvbGRlcicpO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICAvLyBVcGxvYWQgZnVuY3Rpb25hbGl0eVxuICAgIGhhbmRsZUZpbGVTZWxlY3QoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgICBjb25zdCBpbnB1dCA9IGV2ZW50LnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgICAgaWYgKGlucHV0LmZpbGVzKSB7XG4gICAgICAgIGNvbnN0IGZpbGVzID0gQXJyYXkuZnJvbShpbnB1dC5maWxlcyk7XG4gICAgICAgIHRoaXMudXBsb2FkRmlsZXMoZmlsZXMpO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBoYW5kbGVEcm9wKGV2ZW50OiBEcmFnRXZlbnQpOiB2b2lkIHtcbiAgICAgIChldmVudC50YXJnZXQgYXMgSFRNTEVsZW1lbnQpLmNsYXNzTGlzdC5yZW1vdmUoJ2RyYWctb3ZlcicpO1xuICAgICAgaWYgKGV2ZW50LmRhdGFUcmFuc2Zlcj8uZmlsZXMpIHtcbiAgICAgICAgY29uc3QgZmlsZXMgPSBBcnJheS5mcm9tKGV2ZW50LmRhdGFUcmFuc2Zlci5maWxlcyk7XG4gICAgICAgIHRoaXMudXBsb2FkRmlsZXMoZmlsZXMpO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBhc3luYyB1cGxvYWRGaWxlcyhmaWxlczogRmlsZVtdKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICB0aGlzLnVwbG9hZFByb2dyZXNzID0gZmlsZXMubWFwKGYgPT4gKHsgbmFtZTogZi5uYW1lLCBzdGF0dXM6ICdVcGxvYWRpbmcuLi4nIH0pKTtcblxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmaWxlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBmaWxlID0gZmlsZXNbaV07XG4gICAgICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XG4gICAgICAgIGZvcm1EYXRhLmFwcGVuZCgnZmlsZScsIGZpbGUpO1xuICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ2J1Y2tldCcsIHRoaXMuc2VsZWN0ZWRCdWNrZXQpO1xuICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ3ByZWZpeCcsIHRoaXMuY3VycmVudFByZWZpeCk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBhd2FpdCBmZXRjaCgnL2FwaS91cGxvYWQnLCB7XG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgIGJvZHk6IGZvcm1EYXRhXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdGhpcy51cGxvYWRQcm9ncmVzc1tpXS5zdGF0dXMgPSAn4pyTIENvbXBsZXRlJztcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICB0aGlzLnVwbG9hZFByb2dyZXNzW2ldLnN0YXR1cyA9ICfinJcgRmFpbGVkJztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBzZXRUaW1lb3V0KGFzeW5jICgpID0+IHtcbiAgICAgICAgdGhpcy51cGxvYWRQcm9ncmVzcyA9IFtdO1xuICAgICAgICB0aGlzLnNob3dVcGxvYWQgPSBmYWxzZTtcbiAgICAgICAgYXdhaXQgdGhpcy5sb2FkRmlsZXMoKTtcbiAgICAgIH0sIDIwMDApO1xuICAgIH0sXG5cbiAgICBhc3luYyByZWZyZXNoKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgYXdhaXQgdGhpcy5sb2FkRmlsZXMoKTtcbiAgICB9LFxuXG4gICAgZmlsdGVyQnVja2V0cygpOiB2b2lkIHtcbiAgICAgIC8vIFJlYWN0aXZlIGNvbXB1dGVkIHByb3BlcnR5IGhhbmRsZXMgdGhpc1xuICAgIH0sXG5cbiAgICBmaWx0ZXJGaWxlcygpOiB2b2lkIHtcbiAgICAgIC8vIFJlYWN0aXZlIGNvbXB1dGVkIHByb3BlcnR5IGhhbmRsZXMgdGhpc1xuICAgIH1cbiAgfTtcbn1cblxuLy8gQXV0by1yZWdpc3RlciB3aXRoIEFscGluZSB3aGVuIGl0IGluaXRpYWxpemVzXG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgLy8gUmVnaXN0ZXIgaW1tZWRpYXRlbHkgaWYgQWxwaW5lIGlzIGFscmVhZHkgYXZhaWxhYmxlXG4gIGlmICgod2luZG93IGFzIGFueSkuQWxwaW5lKSB7XG4gICAgKHdpbmRvdyBhcyBhbnkpLkFscGluZS5kYXRhKCdzM0V4cGxvcmVyJywgczNFeHBsb3Jlcik7XG4gIH0gZWxzZSB7XG4gICAgLy8gT3RoZXJ3aXNlIHdhaXQgZm9yIEFscGluZSB0byBpbml0aWFsaXplXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignYWxwaW5lOmluaXQnLCAoKSA9PiB7XG4gICAgICAod2luZG93IGFzIGFueSkuQWxwaW5lLmRhdGEoJ3MzRXhwbG9yZXInLCBzM0V4cGxvcmVyKTtcbiAgICB9KTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./apps/server/bucketvore/src/app/client/s3-explorer.client.ts\n");

/***/ }),

/***/ "./apps/server/bucketvore/src/app/client/utils/clipboard.client.ts":
/*!*************************************************************************!*\
  !*** ./apps/server/bucketvore/src/app/client/utils/clipboard.client.ts ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   copyS3PathToClipboard: () => (/* binding */ copyS3PathToClipboard),\n/* harmony export */   copyToClipboard: () => (/* binding */ copyToClipboard)\n/* harmony export */ });\n/**\n * Client-side utility for clipboard operations\n */\nasync function copyToClipboard(text, element) {\n    try {\n        await navigator.clipboard.writeText(text);\n        // Provide visual feedback if element is provided\n        if (element) {\n            const originalText = element.textContent || '';\n            const originalBg = element.style.backgroundColor;\n            element.textContent = '‚úì Copied!';\n            element.style.backgroundColor = 'var(--color-success)';\n            setTimeout(() => {\n                element.textContent = originalText;\n                element.style.backgroundColor = originalBg;\n            }, 1500);\n        }\n        return true;\n    }\n    catch (error) {\n        console.error('Clipboard API failed:', error);\n        // Fallback to prompt\n        const userCopy = prompt('Copy to clipboard:', text);\n        return userCopy !== null;\n    }\n}\nasync function copyS3PathToClipboard(bucket, key, element) {\n    try {\n        // Fetch bucket region\n        const response = await fetch(`/api/buckets/${encodeURIComponent(bucket)}/region`);\n        const data = await response.json();\n        const region = data.region || 'us-east-1';\n        // Construct HTTPS URL\n        const url = `https://s3.${region}.amazonaws.com/${bucket}/${key}`;\n        await copyToClipboard(url, element);\n    }\n    catch (error) {\n        console.error('Error getting S3 URL:', error);\n        // Fallback to s3:// protocol\n        const s3Path = `s3://${bucket}/${key}`;\n        prompt('Copy S3 path (fallback):', s3Path);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9hcHBzL3NlcnZlci9idWNrZXR2b3JlL3NyYy9hcHAvY2xpZW50L3V0aWxzL2NsaXBib2FyZC5jbGllbnQudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTs7R0FFRztBQUVJLEtBQUssVUFBVSxlQUFlLENBQUMsSUFBWSxFQUFFLE9BQXFCO0lBQ3ZFLElBQUksQ0FBQztRQUNILE1BQU0sU0FBUyxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUM7UUFFMUMsaURBQWlEO1FBQ2pELElBQUksT0FBTyxFQUFFLENBQUM7WUFDWixNQUFNLFlBQVksR0FBRyxPQUFPLENBQUMsV0FBVyxJQUFJLEVBQUUsQ0FBQztZQUMvQyxNQUFNLFVBQVUsR0FBRyxPQUFPLENBQUMsS0FBSyxDQUFDLGVBQWUsQ0FBQztZQUVqRCxPQUFPLENBQUMsV0FBVyxHQUFHLFdBQVcsQ0FBQztZQUNsQyxPQUFPLENBQUMsS0FBSyxDQUFDLGVBQWUsR0FBRyxzQkFBc0IsQ0FBQztZQUV2RCxVQUFVLENBQUMsR0FBRyxFQUFFO2dCQUNkLE9BQU8sQ0FBQyxXQUFXLEdBQUcsWUFBWSxDQUFDO2dCQUNuQyxPQUFPLENBQUMsS0FBSyxDQUFDLGVBQWUsR0FBRyxVQUFVLENBQUM7WUFDN0MsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDO1FBQ1gsQ0FBQztRQUVELE9BQU8sSUFBSSxDQUFDO0lBQ2QsQ0FBQztJQUFDLE9BQU8sS0FBSyxFQUFFLENBQUM7UUFDZixPQUFPLENBQUMsS0FBSyxDQUFDLHVCQUF1QixFQUFFLEtBQUssQ0FBQyxDQUFDO1FBRTlDLHFCQUFxQjtRQUNyQixNQUFNLFFBQVEsR0FBRyxNQUFNLENBQUMsb0JBQW9CLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFDcEQsT0FBTyxRQUFRLEtBQUssSUFBSSxDQUFDO0lBQzNCLENBQUM7QUFDSCxDQUFDO0FBRU0sS0FBSyxVQUFVLHFCQUFxQixDQUN6QyxNQUFjLEVBQ2QsR0FBVyxFQUNYLE9BQXFCO0lBRXJCLElBQUksQ0FBQztRQUNILHNCQUFzQjtRQUN0QixNQUFNLFFBQVEsR0FBRyxNQUFNLEtBQUssQ0FBQyxnQkFBZ0Isa0JBQWtCLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQ2xGLE1BQU0sSUFBSSxHQUFHLE1BQU0sUUFBUSxDQUFDLElBQUksRUFBRSxDQUFDO1FBQ25DLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxNQUFNLElBQUksV0FBVyxDQUFDO1FBRTFDLHNCQUFzQjtRQUN0QixNQUFNLEdBQUcsR0FBRyxjQUFjLE1BQU0sa0JBQWtCLE1BQU0sSUFBSSxHQUFHLEVBQUUsQ0FBQztRQUVsRSxNQUFNLGVBQWUsQ0FBQyxHQUFHLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDdEMsQ0FBQztJQUFDLE9BQU8sS0FBSyxFQUFFLENBQUM7UUFDZixPQUFPLENBQUMsS0FBSyxDQUFDLHVCQUF1QixFQUFFLEtBQUssQ0FBQyxDQUFDO1FBRTlDLDZCQUE2QjtRQUM3QixNQUFNLE1BQU0sR0FBRyxRQUFRLE1BQU0sSUFBSSxHQUFHLEVBQUUsQ0FBQztRQUN2QyxNQUFNLENBQUMsMEJBQTBCLEVBQUUsTUFBTSxDQUFDLENBQUM7SUFDN0MsQ0FBQztBQUNILENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vbml2b3JvLy4vYXBwcy9zZXJ2ZXIvYnVja2V0dm9yZS9zcmMvYXBwL2NsaWVudC91dGlscy9jbGlwYm9hcmQuY2xpZW50LnRzP2IzZmUiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDbGllbnQtc2lkZSB1dGlsaXR5IGZvciBjbGlwYm9hcmQgb3BlcmF0aW9uc1xuICovXG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjb3B5VG9DbGlwYm9hcmQodGV4dDogc3RyaW5nLCBlbGVtZW50PzogSFRNTEVsZW1lbnQpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgdHJ5IHtcbiAgICBhd2FpdCBuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dCh0ZXh0KTtcblxuICAgIC8vIFByb3ZpZGUgdmlzdWFsIGZlZWRiYWNrIGlmIGVsZW1lbnQgaXMgcHJvdmlkZWRcbiAgICBpZiAoZWxlbWVudCkge1xuICAgICAgY29uc3Qgb3JpZ2luYWxUZXh0ID0gZWxlbWVudC50ZXh0Q29udGVudCB8fCAnJztcbiAgICAgIGNvbnN0IG9yaWdpbmFsQmcgPSBlbGVtZW50LnN0eWxlLmJhY2tncm91bmRDb2xvcjtcblxuICAgICAgZWxlbWVudC50ZXh0Q29udGVudCA9ICfinJMgQ29waWVkISc7XG4gICAgICBlbGVtZW50LnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICd2YXIoLS1jb2xvci1zdWNjZXNzKSc7XG5cbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBlbGVtZW50LnRleHRDb250ZW50ID0gb3JpZ2luYWxUZXh0O1xuICAgICAgICBlbGVtZW50LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IG9yaWdpbmFsQmc7XG4gICAgICB9LCAxNTAwKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdDbGlwYm9hcmQgQVBJIGZhaWxlZDonLCBlcnJvcik7XG5cbiAgICAvLyBGYWxsYmFjayB0byBwcm9tcHRcbiAgICBjb25zdCB1c2VyQ29weSA9IHByb21wdCgnQ29weSB0byBjbGlwYm9hcmQ6JywgdGV4dCk7XG4gICAgcmV0dXJuIHVzZXJDb3B5ICE9PSBudWxsO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjb3B5UzNQYXRoVG9DbGlwYm9hcmQoXG4gIGJ1Y2tldDogc3RyaW5nLFxuICBrZXk6IHN0cmluZyxcbiAgZWxlbWVudD86IEhUTUxFbGVtZW50XG4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgdHJ5IHtcbiAgICAvLyBGZXRjaCBidWNrZXQgcmVnaW9uXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgL2FwaS9idWNrZXRzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KGJ1Y2tldCl9L3JlZ2lvbmApO1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgY29uc3QgcmVnaW9uID0gZGF0YS5yZWdpb24gfHwgJ3VzLWVhc3QtMSc7XG5cbiAgICAvLyBDb25zdHJ1Y3QgSFRUUFMgVVJMXG4gICAgY29uc3QgdXJsID0gYGh0dHBzOi8vczMuJHtyZWdpb259LmFtYXpvbmF3cy5jb20vJHtidWNrZXR9LyR7a2V5fWA7XG5cbiAgICBhd2FpdCBjb3B5VG9DbGlwYm9hcmQodXJsLCBlbGVtZW50KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZXR0aW5nIFMzIFVSTDonLCBlcnJvcik7XG5cbiAgICAvLyBGYWxsYmFjayB0byBzMzovLyBwcm90b2NvbFxuICAgIGNvbnN0IHMzUGF0aCA9IGBzMzovLyR7YnVja2V0fS8ke2tleX1gO1xuICAgIHByb21wdCgnQ29weSBTMyBwYXRoIChmYWxsYmFjayk6JywgczNQYXRoKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./apps/server/bucketvore/src/app/client/utils/clipboard.client.ts\n");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval-source-map devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./apps/server/bucketvore/src/app/client/s3-explorer.client.ts");
/******/ 	
/******/ })()
;