/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./apps/server/datavore/src/app/client/db-client.client.ts":
/*!*****************************************************************!*\
  !*** ./apps/server/datavore/src/app/client/db-client.client.ts ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   dbClient: () => (/* binding */ dbClient)\n/* harmony export */ });\nfunction dbClient() {\n    return {\n        query: '',\n        editor: null, // Keep for type compatibility but don't use\n        selectedTable: '',\n        activeTab: 'data',\n        isConnected: true,\n        tableCount: 0,\n        allTables: '',\n        filteredTablesHtml: '<div class=\"loading\"><div class=\"spinner\"></div>Loading tables...</div>',\n        dataTabContent: '<div class=\"empty-state\"><div class=\"empty-state-icon\">ðŸ‘‹</div><p>Select a table or execute a query</p></div>',\n        structureTabContent: '',\n        structureLoaded: false,\n        _executing: false, // Prevent multiple simultaneous executions\n        get resultsHtml() {\n            return this.activeTab === 'data' ? this.dataTabContent : this.structureTabContent;\n        },\n        init() {\n            this.loadTables();\n            // Initialize Monaco after a short delay to ensure DOM is ready\n            setTimeout(() => this.initMonaco(), 300);\n        },\n        getConnectionString() {\n            const body = document.querySelector('body');\n            return body?.getAttribute('data-connection-string') || 'default';\n        },\n        getStorageKey() {\n            return `datavore-query-${this.getConnectionString()}`;\n        },\n        saveQueryToLocalStorage(query) {\n            try {\n                localStorage.setItem(this.getStorageKey(), query);\n            }\n            catch (error) {\n                console.warn('Failed to save query to localStorage:', error);\n            }\n        },\n        loadQueryFromLocalStorage() {\n            try {\n                return localStorage.getItem(this.getStorageKey()) || 'SELECT * FROM table_name;';\n            }\n            catch (error) {\n                console.warn('Failed to load query from localStorage:', error);\n                return 'SELECT * FROM table_name;';\n            }\n        },\n        initMonaco() {\n            // Check if already initialized for this instance\n            if (this.editor) {\n                console.log('Monaco editor already initialized');\n                return;\n            }\n            const container = document.getElementById('editor-container');\n            if (!container) {\n                console.error('Editor container not found');\n                return;\n            }\n            // Check if Monaco is already loaded\n            if (window.monaco) {\n                this.createEditor(container);\n            }\n            else {\n                // Load Monaco if not already loaded\n                if (!window.monacoInitialized) {\n                    window.monacoInitialized = true;\n                    window.require.config({\n                        paths: { vs: 'https://cdn.jsdelivr.net/npm/monaco-editor@0.45.0/min/vs' }\n                    });\n                }\n                const self = this;\n                window.require(['vs/editor/editor.main'], function () {\n                    if (!window.monaco) {\n                        console.error('Monaco failed to load');\n                        return;\n                    }\n                    self.createEditor(container);\n                });\n            }\n        },\n        createEditor(container) {\n            // Check if editor already exists globally (outside Alpine's reactivity)\n            if (window.__monacoEditor) {\n                console.log('Monaco editor already exists');\n                return;\n            }\n            // Load saved query from localStorage\n            const savedQuery = this.loadQueryFromLocalStorage();\n            // Create the Monaco editor instance with better state management\n            const editor = window.monaco.editor.create(container, {\n                value: savedQuery,\n                language: 'sql',\n                theme: 'vs-dark',\n                automaticLayout: false, // Critical: prevents layout thrashing\n                minimap: { enabled: false },\n                fontSize: 14,\n                lineNumbers: 'on',\n                roundedSelection: false,\n                scrollBeyondLastLine: false,\n                readOnly: false,\n                tabSize: 2,\n            });\n            window.__monacoEditor = editor;\n            // Add keyboard shortcut - use direct reference to avoid closure issues\n            editor.addCommand(window.monaco.KeyMod.CtrlCmd | window.monaco.KeyCode.Enter, () => {\n                // Get the Alpine component instance from the DOM\n                const alpineComponent = window.Alpine.$data(document.querySelector('[x-data]'));\n                if (alpineComponent && alpineComponent.executeQuery) {\n                    alpineComponent.executeQuery();\n                }\n            });\n            console.log('Monaco editor initialized successfully');\n        },\n        async loadTables() {\n            try {\n                this.isConnected = true;\n                const response = await fetch('/api/tables');\n                const html = await response.text();\n                this.allTables = html;\n                this.tableCount = (html.match(/data-table/g) || []).length;\n                this.filteredTablesHtml = this.allTables;\n            }\n            catch (error) {\n                this.isConnected = false;\n                this.filteredTablesHtml = '<div class=\"error\">Error loading tables</div>';\n            }\n        },\n        async selectTable(tableName) {\n            this.selectedTable = tableName;\n            this.activeTab = 'data';\n            this.structureLoaded = false;\n            this.structureTabContent = '';\n            try {\n                this.dataTabContent =\n                    '<div class=\"loading\"><div class=\"spinner\"></div>Loading table data...</div>';\n                const response = await fetch('/api/table/' + tableName);\n                const html = await response.text();\n                this.dataTabContent = html;\n            }\n            catch (error) {\n                this.dataTabContent = '<div class=\"error\">Error loading table data</div>';\n            }\n        },\n        async executeQuery() {\n            // Use global editor reference instead of Alpine's reactive property\n            const editor = window.__monacoEditor;\n            if (!editor) {\n                console.error('Editor not initialized');\n                return;\n            }\n            // Prevent multiple simultaneous executions\n            if (this._executing) {\n                console.log('Query already executing, skipping...');\n                return;\n            }\n            this._executing = true;\n            try {\n                // Get selected text or full text if no selection\n                const selection = editor.getSelection();\n                let queryToExecute = '';\n                try {\n                    queryToExecute = editor.getModel().getValueInRange(selection);\n                }\n                catch (e) {\n                    console.warn('Could not get selection, using full content');\n                }\n                // If no text is selected (or selection is collapsed), use entire editor content\n                if (!queryToExecute.trim()) {\n                    queryToExecute = editor.getValue();\n                }\n                if (!queryToExecute.trim())\n                    return;\n                // Show loading state\n                this.dataTabContent =\n                    '<div class=\"loading\"><div class=\"spinner\"></div>Executing query...</div>';\n                this.activeTab = 'data';\n                // Execute query\n                const response = await fetch('/api/query', {\n                    method: 'POST',\n                    headers: { 'Content-Type': 'application/json' },\n                    body: JSON.stringify({ query: queryToExecute }),\n                });\n                if (!response.ok) {\n                    throw new Error(`Query failed: ${response.statusText}`);\n                }\n                const html = await response.text();\n                this.dataTabContent = html;\n                // Save the executed query to localStorage\n                this.saveQueryToLocalStorage(queryToExecute);\n            }\n            catch (error) {\n                console.error('Query execution error:', error);\n                this.dataTabContent =\n                    '<div class=\"error\">Query error: ' + (error.message || 'Unknown error') + '</div>';\n            }\n            finally {\n                this._executing = false;\n            }\n        },\n        switchTab(tabName) {\n            this.activeTab = tabName;\n            if (tabName === 'structure' && this.selectedTable && !this.structureLoaded) {\n                this.loadStructure();\n            }\n        },\n        async loadStructure() {\n            try {\n                this.structureTabContent =\n                    '<div class=\"loading\"><div class=\"spinner\"></div>Loading structure...</div>';\n                const response = await fetch('/api/table/' + this.selectedTable + '/structure');\n                const html = await response.text();\n                this.structureTabContent = html;\n                this.structureLoaded = true;\n            }\n            catch (error) {\n                this.structureTabContent = '<div class=\"error\">Error loading structure</div>';\n            }\n        },\n        clearQuery() {\n            const editor = window.__monacoEditor;\n            if (editor) {\n                editor.setValue('');\n            }\n        },\n    };\n}\n// Auto-register with Alpine when it initializes\nif (typeof window !== 'undefined') {\n    // Register immediately if Alpine is already available\n    if (window.Alpine) {\n        window.Alpine.data('dbClient', dbClient);\n    }\n    else {\n        // Otherwise wait for Alpine to initialize\n        document.addEventListener('alpine:init', () => {\n            window.Alpine.data('dbClient', dbClient);\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9hcHBzL3NlcnZlci9kYXRhdm9yZS9zcmMvYXBwL2NsaWVudC9kYi1jbGllbnQuY2xpZW50LnRzIiwibWFwcGluZ3MiOiI7Ozs7QUFZTyxTQUFTLFFBQVE7SUFDdEIsT0FBTztRQUNMLEtBQUssRUFBRSxFQUFFO1FBQ1QsTUFBTSxFQUFFLElBQUksRUFBRSw0Q0FBNEM7UUFDMUQsYUFBYSxFQUFFLEVBQUU7UUFDakIsU0FBUyxFQUFFLE1BQU07UUFDakIsV0FBVyxFQUFFLElBQUk7UUFDakIsVUFBVSxFQUFFLENBQUM7UUFDYixTQUFTLEVBQUUsRUFBRTtRQUNiLGtCQUFrQixFQUFFLHlFQUF5RTtRQUM3RixjQUFjLEVBQUUsK0dBQStHO1FBQy9ILG1CQUFtQixFQUFFLEVBQUU7UUFDdkIsZUFBZSxFQUFFLEtBQUs7UUFDdEIsVUFBVSxFQUFFLEtBQUssRUFBRSwyQ0FBMkM7UUFFOUQsSUFBSSxXQUFXO1lBQ2IsT0FBTyxJQUFJLENBQUMsU0FBUyxLQUFLLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLG1CQUFtQixDQUFDO1FBQ3BGLENBQUM7UUFFRCxJQUFJO1lBQ0YsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO1lBQ2xCLCtEQUErRDtZQUMvRCxVQUFVLENBQUMsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBQzNDLENBQUM7UUFFRCxtQkFBbUI7WUFDakIsTUFBTSxJQUFJLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUM1QyxPQUFPLElBQUksRUFBRSxZQUFZLENBQUMsd0JBQXdCLENBQUMsSUFBSSxTQUFTLENBQUM7UUFDbkUsQ0FBQztRQUVELGFBQWE7WUFDWCxPQUFPLGtCQUFrQixJQUFJLENBQUMsbUJBQW1CLEVBQUUsRUFBRSxDQUFDO1FBQ3hELENBQUM7UUFFRCx1QkFBdUIsQ0FBQyxLQUFhO1lBQ25D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QUM7WUFDaEYsQ0FBQztRQUNILENBQUM7UUFFRCxVQUFVO1lBQ1IsTUFBTSxNQUFNLEdBQUcsTUFBTSxDQUFDLGNBQWMsQ0FBQztZQUNyQyxJQUFJLE1BQU0sRUFBRSxDQUFDO2dCQUNYLE1BQU0sQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDdEIsQ0FBQztRQUNILENBQUM7S0FDRixDQUFDO0FBQ0osQ0FBQztBQUVELGdEQUFnRDtBQUNoRCxJQUFJLE9BQU8sTUFBTSxLQUFLLFdBQVcsRUFBRSxDQUFDO0lBQ2xDLHNEQUFzRDtJQUN0RCxJQUFLLE1BQWMsQ0FBQyxNQUFNLEVBQUUsQ0FBQztRQUMxQixNQUFjLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsUUFBUSxDQUFDLENBQUM7SUFDcEQsQ0FBQztTQUFNLENBQUM7UUFDTiwwQ0FBMEM7UUFDMUMsUUFBUSxDQUFDLGdCQUFnQixDQUFDLGFBQWEsRUFBRSxHQUFHLEVBQUU7WUFDM0MsTUFBYyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLFFBQVEsQ0FBQyxDQUFDO1FBQ3BELENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztBQUNILENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vbml2b3JvLy4vYXBwcy9zZXJ2ZXIvZGF0YXZvcmUvc3JjL2FwcC9jbGllbnQvZGItY2xpZW50LmNsaWVudC50cz9mNGU0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgRGJDbGllbnRTdGF0ZSB9IGZyb20gJy4uL3NoYXJlZC90eXBlcy5zaGFyZWQnO1xuXG5kZWNsYXJlIGdsb2JhbCB7XG4gIGludGVyZmFjZSBXaW5kb3cge1xuICAgIEFscGluZTogYW55O1xuICAgIG1vbmFjbzogYW55O1xuICAgIHJlcXVpcmU6IGFueTtcbiAgICBtb25hY29Jbml0aWFsaXplZD86IGJvb2xlYW47XG4gICAgX19tb25hY29FZGl0b3I/OiBhbnk7IC8vIFN0b3JlIGVkaXRvciBvdXRzaWRlIEFscGluZSdzIHJlYWN0aXZpdHlcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZGJDbGllbnQoKTogRGJDbGllbnRTdGF0ZSB7XG4gIHJldHVybiB7XG4gICAgcXVlcnk6ICcnLFxuICAgIGVkaXRvcjogbnVsbCwgLy8gS2VlcCBmb3IgdHlwZSBjb21wYXRpYmlsaXR5IGJ1dCBkb24ndCB1c2VcbiAgICBzZWxlY3RlZFRhYmxlOiAnJyxcbiAgICBhY3RpdmVUYWI6ICdkYXRhJyxcbiAgICBpc0Nvbm5lY3RlZDogdHJ1ZSxcbiAgICB0YWJsZUNvdW50OiAwLFxuICAgIGFsbFRhYmxlczogJycsXG4gICAgZmlsdGVyZWRUYWJsZXNIdG1sOiAnPGRpdiBjbGFzcz1cImxvYWRpbmdcIj48ZGl2IGNsYXNzPVwic3Bpbm5lclwiPjwvZGl2PkxvYWRpbmcgdGFibGVzLi4uPC9kaXY+JyxcbiAgICBkYXRhVGFiQ29udGVudDogJzxkaXYgY2xhc3M9XCJlbXB0eS1zdGF0ZVwiPjxkaXYgY2xhc3M9XCJlbXB0eS1zdGF0ZS1pY29uXCI+8J+RizwvZGl2PjxwPlNlbGVjdCBhIHRhYmxlIG9yIGV4ZWN1dGUgYSBxdWVyeTwvcD48L2Rpdj4nLFxuICAgIHN0cnVjdHVyZVRhYkNvbnRlbnQ6ICcnLFxuICAgIHN0cnVjdHVyZUxvYWRlZDogZmFsc2UsXG4gICAgX2V4ZWN1dGluZzogZmFsc2UsIC8vIFByZXZlbnQgbXVsdGlwbGUgc2ltdWx0YW5lb3VzIGV4ZWN1dGlvbnNcblxuICAgIGdldCByZXN1bHRzSHRtbCgpOiBzdHJpbmcge1xuICAgICAgcmV0dXJuIHRoaXMuYWN0aXZlVGFiID09PSAnZGF0YScgPyB0aGlzLmRhdGFUYWJDb250ZW50IDogdGhpcy5zdHJ1Y3R1cmVUYWJDb250ZW50O1xuICAgIH0sXG5cbiAgICBpbml0KCk6IHZvaWQge1xuICAgICAgdGhpcy5sb2FkVGFibGVzKCk7XG4gICAgICAvLyBJbml0aWFsaXplIE1vbmFjbyBhZnRlciBhIHNob3J0IGRlbGF5IHRvIGVuc3VyZSBET00gaXMgcmVhZHlcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5pbml0TW9uYWNvKCksIDMwMCk7XG4gICAgfSxcblxuICAgIGdldENvbm5lY3Rpb25TdHJpbmcoKTogc3RyaW5nIHtcbiAgICAgIGNvbnN0IGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5Jyk7XG4gICAgICByZXR1cm4gYm9keT8uZ2V0QXR0cmlidXRlKCdkYXRhLWNvbm5lY3Rpb24tc3RyaW5nJykgfHwgJ2RlZmF1bHQnO1xuICAgIH0sXG5cbiAgICBnZXRTdG9yYWdlS2V5KCk6IHN0cmluZyB7XG4gICAgICByZXR1cm4gYGRhdGF2b3JlLXF1ZXJ5LSR7dGhpcy5nZXRDb25uZWN0aW9uU3RyaW5nKCl9YDtcbiAgICB9LFxuXG4gICAgc2F2ZVF1ZXJ5VG9Mb2NhbFN0b3JhZ2UocXVlcnk6IHN0cmluZyk6IHZvaWQge1xuICAgICAgdHJ5IHtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0odGhpcy5nZXRTdG9yYWdlS2V5KCksIHF1ZXJ5KTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUud2FybignRmFpbGVkIHRvIHNhdmUgcXVlcnkgdG8gbG9jYWxTdG9yYWdlOicsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgbG9hZFF1ZXJ5RnJvbUxvY2FsU3RvcmFnZSgpOiBzdHJpbmcge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGxvY2FsU3RvcmFnZS5nZXRJdGVtKHRoaXMuZ2V0U3RvcmFnZUtleSgpKSB8fCAnU0VMRUNUICogRlJPTSB0YWJsZV9uYW1lOyc7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLndhcm4oJ0ZhaWxlZCB0byBsb2FkIHF1ZXJ5IGZyb20gbG9jYWxTdG9yYWdlOicsIGVycm9yKTtcbiAgICAgICAgcmV0dXJuICdTRUxFQ1QgKiBGUk9NIHRhYmxlX25hbWU7JztcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgaW5pdE1vbmFjbygpOiB2b2lkIHtcbiAgICAgIC8vIENoZWNrIGlmIGFscmVhZHkgaW5pdGlhbGl6ZWQgZm9yIHRoaXMgaW5zdGFuY2VcbiAgICAgIGlmICh0aGlzLmVkaXRvcikge1xuICAgICAgICBjb25zb2xlLmxvZygnTW9uYWNvIGVkaXRvciBhbHJlYWR5IGluaXRpYWxpemVkJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VkaXRvci1jb250YWluZXInKTtcbiAgICAgIGlmICghY29udGFpbmVyKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0VkaXRvciBjb250YWluZXIgbm90IGZvdW5kJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gQ2hlY2sgaWYgTW9uYWNvIGlzIGFscmVhZHkgbG9hZGVkXG4gICAgICBpZiAod2luZG93Lm1vbmFjbykge1xuICAgICAgICB0aGlzLmNyZWF0ZUVkaXRvcihjb250YWluZXIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gTG9hZCBNb25hY28gaWYgbm90IGFscmVhZHkgbG9hZGVkXG4gICAgICAgIGlmICghd2luZG93Lm1vbmFjb0luaXRpYWxpemVkKSB7XG4gICAgICAgICAgd2luZG93Lm1vbmFjb0luaXRpYWxpemVkID0gdHJ1ZTtcbiAgICAgICAgICB3aW5kb3cucmVxdWlyZS5jb25maWcoe1xuICAgICAgICAgICAgcGF0aHM6IHsgdnM6ICdodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL21vbmFjby1lZGl0b3JAMC40NS4wL21pbi92cycgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gICAgICAgIHdpbmRvdy5yZXF1aXJlKFsndnMvZWRpdG9yL2VkaXRvci5tYWluJ10sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBpZiAoIXdpbmRvdy5tb25hY28pIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ01vbmFjbyBmYWlsZWQgdG8gbG9hZCcpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBzZWxmLmNyZWF0ZUVkaXRvcihjb250YWluZXIpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgY3JlYXRlRWRpdG9yKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpOiB2b2lkIHtcbiAgICAgIC8vIENoZWNrIGlmIGVkaXRvciBhbHJlYWR5IGV4aXN0cyBnbG9iYWxseSAob3V0c2lkZSBBbHBpbmUncyByZWFjdGl2aXR5KVxuICAgICAgaWYgKHdpbmRvdy5fX21vbmFjb0VkaXRvcikge1xuICAgICAgICBjb25zb2xlLmxvZygnTW9uYWNvIGVkaXRvciBhbHJlYWR5IGV4aXN0cycpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgICAgICAgIC8vIExvYWQgc2F2ZWQgcXVlcnkgZnJvbSBsb2NhbFN0b3JhZ2VcbiAgICAgIGNvbnN0IHNhdmVkUXVlcnkgPSB0aGlzLmxvYWRRdWVyeUZyb21Mb2NhbFN0b3JhZ2UoKTtcblxuICAgICAgLy8gQ3JlYXRlIHRoZSBNb25hY28gZWRpdG9yIGluc3RhbmNlIHdpdGggYmV0dGVyIHN0YXRlIG1hbmFnZW1lbnRcbiAgICAgIGNvbnN0IGVkaXRvciA9IHdpbmRvdy5tb25hY28uZWRpdG9yLmNyZWF0ZShjb250YWluZXIsIHtcbiAgICAgICAgdmFsdWU6IHNhdmVkUXVlcnksXG4gICAgICAgIGxhbmd1YWdlOiAnc3FsJyxcbiAgICAgICAgdGhlbWU6ICd2cy1kYXJrJyxcbiAgICAgICAgYXV0b21hdGljTGF5b3V0OiBmYWxzZSwgLy8gQ3JpdGljYWw6IHByZXZlbnRzIGxheW91dCB0aHJhc2hpbmdcbiAgICAgICAgbWluaW1hcDogeyBlbmFibGVkOiBmYWxzZSB9LFxuICAgICAgICBmb250U2l6ZTogMTQsXG4gICAgICAgIGxpbmVOdW1iZXJzOiAnb24nLFxuICAgICAgICByb3VuZGVkU2VsZWN0aW9uOiBmYWxzZSxcbiAgICAgICAgc2Nyb2xsQmV5b25kTGFzdExpbmU6IGZhbHNlLFxuICAgICAgICByZWFkT25seTogZmFsc2UsXG4gICAgICAgIHRhYlNpemU6IDIsXG4gICAgICB9KTtcblxuICAgICAgd2luZG93Ll9fbW9uYWNvRWRpdG9yID0gZWRpdG9yO1xuXG4gICAgICAvLyBBZGQga2V5Ym9hcmQgc2hvcnRjdXQgLSB1c2UgZGlyZWN0IHJlZmVyZW5jZSB0byBhdm9pZCBjbG9zdXJlIGlzc3Vlc1xuICAgICAgZWRpdG9yLmFkZENvbW1hbmQoXG4gICAgICAgIHdpbmRvdy5tb25hY28uS2V5TW9kLkN0cmxDbWQgfCB3aW5kb3cubW9uYWNvLktleUNvZGUuRW50ZXIsXG4gICAgICAgICgpID0+IHtcbiAgICAgICAgICAvLyBHZXQgdGhlIEFscGluZSBjb21wb25lbnQgaW5zdGFuY2UgZnJvbSB0aGUgRE9NXG4gICAgICAgICAgY29uc3QgYWxwaW5lQ29tcG9uZW50ID0gKHdpbmRvdyBhcyBhbnkpLkFscGluZS4kZGF0YShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbeC1kYXRhXScpKTtcbiAgICAgICAgICBpZiAoYWxwaW5lQ29tcG9uZW50ICYmIGFscGluZUNvbXBvbmVudC5leGVjdXRlUXVlcnkpIHtcbiAgICAgICAgICAgIGFscGluZUNvbXBvbmVudC5leGVjdXRlUXVlcnkoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICk7XG5cbiAgICAgIGNvbnNvbGUubG9nKCdNb25hY28gZWRpdG9yIGluaXRpYWxpemVkIHN1Y2Nlc3NmdWxseScpO1xuICAgIH0sXG5cbiAgICBhc3luYyBsb2FkVGFibGVzKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdGhpcy5pc0Nvbm5lY3RlZCA9IHRydWU7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJy9hcGkvdGFibGVzJyk7XG4gICAgICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7XG4gICAgICAgIHRoaXMuYWxsVGFibGVzID0gaHRtbDtcbiAgICAgICAgdGhpcy50YWJsZUNvdW50ID0gKGh0bWwubWF0Y2goL2RhdGEtdGFibGUvZykgfHwgW10pLmxlbmd0aDtcbiAgICAgICAgdGhpcy5maWx0ZXJlZFRhYmxlc0h0bWwgPSB0aGlzLmFsbFRhYmxlcztcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHRoaXMuaXNDb25uZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5maWx0ZXJlZFRhYmxlc0h0bWwgPSAnPGRpdiBjbGFzcz1cImVycm9yXCI+RXJyb3IgbG9hZGluZyB0YWJsZXM8L2Rpdj4nO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBhc3luYyBzZWxlY3RUYWJsZSh0YWJsZU5hbWU6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgdGhpcy5zZWxlY3RlZFRhYmxlID0gdGFibGVOYW1lO1xuICAgICAgdGhpcy5hY3RpdmVUYWIgPSAnZGF0YSc7XG4gICAgICB0aGlzLnN0cnVjdHVyZUxvYWRlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5zdHJ1Y3R1cmVUYWJDb250ZW50ID0gJyc7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIHRoaXMuZGF0YVRhYkNvbnRlbnQgPVxuICAgICAgICAgICc8ZGl2IGNsYXNzPVwibG9hZGluZ1wiPjxkaXYgY2xhc3M9XCJzcGlubmVyXCI+PC9kaXY+TG9hZGluZyB0YWJsZSBkYXRhLi4uPC9kaXY+JztcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnL2FwaS90YWJsZS8nICsgdGFibGVOYW1lKTtcbiAgICAgICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcbiAgICAgICAgdGhpcy5kYXRhVGFiQ29udGVudCA9IGh0bWw7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICB0aGlzLmRhdGFUYWJDb250ZW50ID0gJzxkaXYgY2xhc3M9XCJlcnJvclwiPkVycm9yIGxvYWRpbmcgdGFibGUgZGF0YTwvZGl2Pic7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGFzeW5jIGV4ZWN1dGVRdWVyeSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgIC8vIFVzZSBnbG9iYWwgZWRpdG9yIHJlZmVyZW5jZSBpbnN0ZWFkIG9mIEFscGluZSdzIHJlYWN0aXZlIHByb3BlcnR5XG4gICAgICBjb25zdCBlZGl0b3IgPSB3aW5kb3cuX19tb25hY29FZGl0b3I7XG4gICAgICBpZiAoIWVkaXRvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFZGl0b3Igbm90IGluaXRpYWxpemVkJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gUHJldmVudCBtdWx0aXBsZSBzaW11bHRhbmVvdXMgZXhlY3V0aW9uc1xuICAgICAgaWYgKCh0aGlzIGFzIGFueSkuX2V4ZWN1dGluZykge1xuICAgICAgICBjb25zb2xlLmxvZygnUXVlcnkgYWxyZWFkeSBleGVjdXRpbmcsIHNraXBwaW5nLi4uJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgKHRoaXMgYXMgYW55KS5fZXhlY3V0aW5nID0gdHJ1ZTtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gR2V0IHNlbGVjdGVkIHRleHQgb3IgZnVsbCB0ZXh0IGlmIG5vIHNlbGVjdGlvblxuICAgICAgICBjb25zdCBzZWxlY3Rpb24gPSBlZGl0b3IuZ2V0U2VsZWN0aW9uKCk7XG4gICAgICAgIGxldCBxdWVyeVRvRXhlY3V0ZSA9ICcnO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgcXVlcnlUb0V4ZWN1dGUgPSBlZGl0b3IuZ2V0TW9kZWwoKS5nZXRWYWx1ZUluUmFuZ2Uoc2VsZWN0aW9uKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIGNvbnNvbGUud2FybignQ291bGQgbm90IGdldCBzZWxlY3Rpb24sIHVzaW5nIGZ1bGwgY29udGVudCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gSWYgbm8gdGV4dCBpcyBzZWxlY3RlZCAob3Igc2VsZWN0aW9uIGlzIGNvbGxhcHNlZCksIHVzZSBlbnRpcmUgZWRpdG9yIGNvbnRlbnRcbiAgICAgICAgaWYgKCFxdWVyeVRvRXhlY3V0ZS50cmltKCkpIHtcbiAgICAgICAgICBxdWVyeVRvRXhlY3V0ZSA9IGVkaXRvci5nZXRWYWx1ZSgpO1xuICAgICAgICB9ICAgICAgICBpZiAoIXF1ZXJ5VG9FeGVjdXRlLnRyaW0oKSkgcmV0dXJuO1xuXG4gICAgICAgIC8vIFNob3cgbG9hZGluZyBzdGF0ZVxuICAgICAgICB0aGlzLmRhdGFUYWJDb250ZW50ID1cbiAgICAgICAgICAnPGRpdiBjbGFzcz1cImxvYWRpbmdcIj48ZGl2IGNsYXNzPVwic3Bpbm5lclwiPjwvZGl2PkV4ZWN1dGluZyBxdWVyeS4uLjwvZGl2Pic7XG4gICAgICAgIHRoaXMuYWN0aXZlVGFiID0gJ2RhdGEnO1xuXG4gICAgICAgIC8vIEV4ZWN1dGUgcXVlcnlcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnL2FwaS9xdWVyeScsIHtcbiAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IHF1ZXJ5OiBxdWVyeVRvRXhlY3V0ZSB9KSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgUXVlcnkgZmFpbGVkOiAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBodG1sID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xuICAgICAgICB0aGlzLmRhdGFUYWJDb250ZW50ID0gaHRtbDtcblxuICAgICAgICAvLyBTYXZlIHRoZSBleGVjdXRlZCBxdWVyeSB0byBsb2NhbFN0b3JhZ2VcbiAgICAgICAgdGhpcy5zYXZlUXVlcnlUb0xvY2FsU3RvcmFnZShxdWVyeVRvRXhlY3V0ZSk7XG4gICAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1F1ZXJ5IGV4ZWN1dGlvbiBlcnJvcjonLCBlcnJvcik7XG4gICAgICAgIHRoaXMuZGF0YVRhYkNvbnRlbnQgPVxuICAgICAgICAgICc8ZGl2IGNsYXNzPVwiZXJyb3JcIj5RdWVyeSBlcnJvcjogJyArIChlcnJvci5tZXNzYWdlIHx8ICdVbmtub3duIGVycm9yJykgKyAnPC9kaXY+JztcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICh0aGlzIGFzIGFueSkuX2V4ZWN1dGluZyA9IGZhbHNlO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBzd2l0Y2hUYWIodGFiTmFtZTogJ2RhdGEnIHwgJ3N0cnVjdHVyZScpOiB2b2lkIHtcbiAgICAgIHRoaXMuYWN0aXZlVGFiID0gdGFiTmFtZTtcbiAgICAgIGlmICh0YWJOYW1lID09PSAnc3RydWN0dXJlJyAmJiB0aGlzLnNlbGVjdGVkVGFibGUgJiYgIXRoaXMuc3RydWN0dXJlTG9hZGVkKSB7XG4gICAgICAgIHRoaXMubG9hZFN0cnVjdHVyZSgpO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBhc3luYyBsb2FkU3RydWN0dXJlKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdGhpcy5zdHJ1Y3R1cmVUYWJDb250ZW50ID1cbiAgICAgICAgICAnPGRpdiBjbGFzcz1cImxvYWRpbmdcIj48ZGl2IGNsYXNzPVwic3Bpbm5lclwiPjwvZGl2PkxvYWRpbmcgc3RydWN0dXJlLi4uPC9kaXY+JztcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcbiAgICAgICAgICAnL2FwaS90YWJsZS8nICsgdGhpcy5zZWxlY3RlZFRhYmxlICsgJy9zdHJ1Y3R1cmUnXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7XG4gICAgICAgIHRoaXMuc3RydWN0dXJlVGFiQ29udGVudCA9IGh0bWw7XG4gICAgICAgIHRoaXMuc3RydWN0dXJlTG9hZGVkID0gdHJ1ZTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHRoaXMuc3RydWN0dXJlVGFiQ29udGVudCA9ICc8ZGl2IGNsYXNzPVwiZXJyb3JcIj5FcnJvciBsb2FkaW5nIHN0cnVjdHVyZTwvZGl2Pic7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGNsZWFyUXVlcnkoKTogdm9pZCB7XG4gICAgICBjb25zdCBlZGl0b3IgPSB3aW5kb3cuX19tb25hY29FZGl0b3I7XG4gICAgICBpZiAoZWRpdG9yKSB7XG4gICAgICAgIGVkaXRvci5zZXRWYWx1ZSgnJyk7XG4gICAgICB9XG4gICAgfSxcbiAgfTtcbn1cblxuLy8gQXV0by1yZWdpc3RlciB3aXRoIEFscGluZSB3aGVuIGl0IGluaXRpYWxpemVzXG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgLy8gUmVnaXN0ZXIgaW1tZWRpYXRlbHkgaWYgQWxwaW5lIGlzIGFscmVhZHkgYXZhaWxhYmxlXG4gIGlmICgod2luZG93IGFzIGFueSkuQWxwaW5lKSB7XG4gICAgKHdpbmRvdyBhcyBhbnkpLkFscGluZS5kYXRhKCdkYkNsaWVudCcsIGRiQ2xpZW50KTtcbiAgfSBlbHNlIHtcbiAgICAvLyBPdGhlcndpc2Ugd2FpdCBmb3IgQWxwaW5lIHRvIGluaXRpYWxpemVcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdhbHBpbmU6aW5pdCcsICgpID0+IHtcbiAgICAgICh3aW5kb3cgYXMgYW55KS5BbHBpbmUuZGF0YSgnZGJDbGllbnQnLCBkYkNsaWVudCk7XG4gICAgfSk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./apps/server/datavore/src/app/client/db-client.client.ts\n");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The require scope
/******/ 	var __webpack_require__ = {};
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval-source-map devtool is used.
/******/ 	var __webpack_exports__ = {};
/******/ 	__webpack_modules__["./apps/server/datavore/src/app/client/db-client.client.ts"](0, __webpack_exports__, __webpack_require__);
/******/ 	
/******/ })()
;