/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./apps/server/datavore/src/app/client/db-client.client.ts":
/*!*****************************************************************!*\
  !*** ./apps/server/datavore/src/app/client/db-client.client.ts ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   dbClient: () => (/* binding */ dbClient)\n/* harmony export */ });\nfunction dbClient() {\n    return {\n        query: '',\n        editor: null, // Keep for type compatibility but don't use\n        selectedTable: '',\n        activeTab: 'data',\n        isConnected: true,\n        tableCount: 0,\n        allTables: '',\n        filteredTablesHtml: '<div class=\"loading\"><div class=\"spinner\"></div>Loading tables...</div>',\n        dataTabContent: '<div class=\"empty-state\"><div class=\"empty-state-icon\">ðŸ‘‹</div><p>Select a table or execute a query</p></div>',\n        structureTabContent: '',\n        structureLoaded: false,\n        _executing: false, // Prevent multiple simultaneous executions\n        currentQueryId: null,\n        queryStats: null,\n        get resultsHtml() {\n            return this.activeTab === 'data' ? this.dataTabContent : this.structureTabContent;\n        },\n        init() {\n            this.loadTables();\n            // Initialize Monaco after a short delay to ensure DOM is ready\n            setTimeout(() => this.initMonaco(), 300);\n        },\n        getConnectionString() {\n            const body = document.querySelector('body');\n            return body?.getAttribute('data-connection-string') || 'default';\n        },\n        getStorageKey() {\n            return `datavore-query-${this.getConnectionString()}`;\n        },\n        saveQueryToLocalStorage(query) {\n            try {\n                localStorage.setItem(this.getStorageKey(), query);\n            }\n            catch (error) {\n                console.warn('Failed to save query to localStorage:', error);\n            }\n        },\n        loadQueryFromLocalStorage() {\n            try {\n                return localStorage.getItem(this.getStorageKey()) || 'SELECT * FROM table_name;';\n            }\n            catch (error) {\n                console.warn('Failed to load query from localStorage:', error);\n                return 'SELECT * FROM table_name;';\n            }\n        },\n        initMonaco() {\n            // Check if already initialized for this instance\n            if (this.editor) {\n                console.log('Monaco editor already initialized');\n                return;\n            }\n            const container = document.getElementById('editor-container');\n            if (!container) {\n                console.error('Editor container not found');\n                return;\n            }\n            // Check if Monaco is already loaded\n            if (window.monaco) {\n                this.createEditor(container);\n            }\n            else {\n                // Load Monaco if not already loaded\n                if (!window.monacoInitialized) {\n                    window.monacoInitialized = true;\n                    window.require.config({\n                        paths: { vs: 'https://cdn.jsdelivr.net/npm/monaco-editor@0.45.0/min/vs' }\n                    });\n                }\n                const self = this;\n                window.require(['vs/editor/editor.main'], function () {\n                    if (!window.monaco) {\n                        console.error('Monaco failed to load');\n                        return;\n                    }\n                    self.createEditor(container);\n                });\n            }\n        },\n        createEditor(container) {\n            // Check if editor already exists globally (outside Alpine's reactivity)\n            if (window.__monacoEditor) {\n                console.log('Monaco editor already exists');\n                return;\n            }\n            // Load saved query from localStorage\n            const savedQuery = this.loadQueryFromLocalStorage();\n            // Create the Monaco editor instance with better state management\n            const editor = window.monaco.editor.create(container, {\n                value: savedQuery,\n                language: 'sql',\n                theme: 'vs-dark',\n                automaticLayout: false, // Critical: prevents layout thrashing\n                minimap: { enabled: false },\n                fontSize: 14,\n                lineNumbers: 'on',\n                roundedSelection: false,\n                scrollBeyondLastLine: false,\n                readOnly: false,\n                tabSize: 2,\n            });\n            window.__monacoEditor = editor;\n            // Add keyboard shortcut - use direct reference to avoid closure issues\n            editor.addCommand(window.monaco.KeyMod.CtrlCmd | window.monaco.KeyCode.Enter, () => {\n                // Get the Alpine component instance from the DOM\n                const alpineComponent = window.Alpine.$data(document.querySelector('[x-data]'));\n                if (alpineComponent && alpineComponent.executeQuery) {\n                    alpineComponent.executeQuery();\n                }\n            });\n            console.log('Monaco editor initialized successfully');\n        },\n        async loadTables() {\n            try {\n                this.isConnected = true;\n                const response = await fetch('/api/tables');\n                const html = await response.text();\n                this.allTables = html;\n                this.tableCount = (html.match(/data-table/g) || []).length;\n                this.filteredTablesHtml = this.allTables;\n            }\n            catch (error) {\n                this.isConnected = false;\n                this.filteredTablesHtml = '<div class=\"error\">Error loading tables</div>';\n            }\n        },\n        async selectTable(tableName) {\n            this.selectedTable = tableName;\n            this.activeTab = 'data';\n            this.structureLoaded = false;\n            this.structureTabContent = '';\n            try {\n                this.dataTabContent =\n                    '<div class=\"loading\"><div class=\"spinner\"></div>Loading table data...</div>';\n                const response = await fetch('/api/table/' + tableName);\n                const html = await response.text();\n                this.dataTabContent = html;\n            }\n            catch (error) {\n                this.dataTabContent = '<div class=\"error\">Error loading table data</div>';\n            }\n        },\n        async executeQuery() {\n            // Use global editor reference instead of Alpine's reactive property\n            const editor = window.__monacoEditor;\n            if (!editor) {\n                console.error('Editor not initialized');\n                return;\n            }\n            // Prevent multiple simultaneous executions\n            if (this._executing) {\n                console.log('Query already executing, skipping...');\n                return;\n            }\n            this._executing = true;\n            this.currentQueryId = `query-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n            this.queryStats = null;\n            try {\n                // Get selected text or full text if no selection\n                const selection = editor.getSelection();\n                let queryToExecute = '';\n                try {\n                    queryToExecute = editor.getModel().getValueInRange(selection);\n                }\n                catch (e) {\n                    console.warn('Could not get selection, using full content');\n                }\n                // If no text is selected (or selection is collapsed), use entire editor content\n                if (!queryToExecute.trim()) {\n                    queryToExecute = editor.getValue();\n                }\n                if (!queryToExecute.trim()) {\n                    this._executing = false;\n                    this.currentQueryId = null;\n                    return;\n                }\n                // Show loading state\n                this.dataTabContent =\n                    '<div class=\"loading\"><div class=\"spinner\"></div>Executing query...</div>';\n                this.activeTab = 'data';\n                // Execute query with queryId for cancellation support\n                const response = await fetch('/api/query', {\n                    method: 'POST',\n                    headers: { 'Content-Type': 'application/json' },\n                    body: JSON.stringify({\n                        query: queryToExecute,\n                        queryId: this.currentQueryId\n                    }),\n                });\n                if (!response.ok) {\n                    throw new Error(`Query failed: ${response.statusText}`);\n                }\n                const result = await response.json();\n                this.dataTabContent = result.html;\n                this.queryStats = {\n                    elapsedMs: result.elapsedMs,\n                    rowCount: result.rowCount\n                };\n                // Save the entire editor content to localStorage (not just the executed portion)\n                this.saveQueryToLocalStorage(editor.getValue());\n            }\n            catch (error) {\n                console.error('Query execution error:', error);\n                // Check if it was a cancellation\n                if (error.name === 'AbortError' || error.message?.includes('cancel')) {\n                    this.dataTabContent = '<div class=\"info\">Query cancelled by user</div>';\n                }\n                else {\n                    this.dataTabContent =\n                        '<div class=\"error\">Query error: ' + (error.message || 'Unknown error') + '</div>';\n                }\n                this.queryStats = null;\n            }\n            finally {\n                this._executing = false;\n                this.currentQueryId = null;\n            }\n        },\n        async cancelQuery() {\n            if (!this.currentQueryId) {\n                console.log('No active query to cancel');\n                return;\n            }\n            try {\n                const response = await fetch('/api/query/cancel', {\n                    method: 'POST',\n                    headers: { 'Content-Type': 'application/json' },\n                    body: JSON.stringify({ queryId: this.currentQueryId }),\n                });\n                const result = await response.json();\n                if (result.cancelled) {\n                    this.dataTabContent = '<div class=\"info\">Query cancelled successfully</div>';\n                    this.queryStats = null;\n                }\n            }\n            catch (error) {\n                console.error('Error cancelling query:', error);\n            }\n        },\n        switchTab(tabName) {\n            this.activeTab = tabName;\n            if (tabName === 'structure' && this.selectedTable && !this.structureLoaded) {\n                this.loadStructure();\n            }\n        },\n        async loadStructure() {\n            try {\n                this.structureTabContent =\n                    '<div class=\"loading\"><div class=\"spinner\"></div>Loading structure...</div>';\n                const response = await fetch('/api/table/' + this.selectedTable + '/structure');\n                const html = await response.text();\n                this.structureTabContent = html;\n                this.structureLoaded = true;\n            }\n            catch (error) {\n                this.structureTabContent = '<div class=\"error\">Error loading structure</div>';\n            }\n        },\n        clearQuery() {\n            const editor = window.__monacoEditor;\n            if (editor) {\n                editor.setValue('');\n            }\n        },\n    };\n}\n// Auto-register with Alpine when it initializes\nif (typeof window !== 'undefined') {\n    // Register immediately if Alpine is already available\n    if (window.Alpine) {\n        window.Alpine.data('dbClient', dbClient);\n    }\n    else {\n        // Otherwise wait for Alpine to initialize\n        document.addEventListener('alpine:init', () => {\n            window.Alpine.data('dbClient', dbClient);\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9hcHBzL3NlcnZlci9kYXRhdm9yZS9zcmMvYXBwL2NsaWVudC9kYi1jbGllbnQuY2xpZW50LnRzIiwibWFwcGluZ3MiOiI7Ozs7QUFZTyxTQUFTLFFBQVE7SUFDdEIsT0FBTztRQUNMLEtBQUssRUFBRSxFQUFFO1FBQ1QsTUFBTSxFQUFFLElBQUksRUFBRSw0Q0FBNEM7UUFDMUQsYUFBYSxFQUFFLEVBQUU7UUFDakIsU0FBUyxFQUFFLE1BQU07UUFDakIsV0FBVyxFQUFFLElBQUk7UUFDakIsVUFBVSxFQUFFLENBQUM7UUFDYixTQUFTLEVBQUUsRUFBRTtRQUNiLGtCQUFrQixFQUFFLHlFQUF5RTtRQUM3RixjQUFjLEVBQUUsK0dBQStHO1FBQy9ILG1CQUFtQixFQUFFLEVBQUU7UUFDdkIsZUFBZSxFQUFFLEtBQUs7UUFDdEIsVUFBVSxFQUFFLEtBQUssRUFBRSwyQ0FBMkM7UUFDOUQsY0FBYyxFQUFFLElBQUk7UUFDcEIsVUFBVSxFQUFFLElBQUk7UUFFaEIsSUFBSSxXQUFXO1lBQ2IsT0FBTyxJQUFJLENBQUMsU0FBUyxLQUFLLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLG1CQUFtQixDQUFDO1FBQ3BGLENBQUM7UUFFRCxJQUFJO1lBQ0YsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO1lBQ2xCLCtEQUErRDtZQUMvRCxVQUFVLENBQUMsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBQzNDLENBQUM7UUFFRCxtQkFBbUI7WUFDakIsTUFBTSxJQUFJLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUM1QyxPQUFPLElBQUksRUFBRSxZQUFZLENBQUMsd0JBQXdCLENBQUMsSUFBSSxTQUFTLENBQUM7UUFDbkUsQ0FBQztRQUVELGFBQWE7WUFDWCxPQUFPLGtCQUFrQixJQUFJLENBQUMsbUJBQW1CLEVBQUUsRUFBRSxD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QWMsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxRQUFRLENBQUMsQ0FBQztRQUNwRCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7QUFDSCxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb25pdm9yby8uL2FwcHMvc2VydmVyL2RhdGF2b3JlL3NyYy9hcHAvY2xpZW50L2RiLWNsaWVudC5jbGllbnQudHM/ZjRlNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IERiQ2xpZW50U3RhdGUgfSBmcm9tICcuLi9zaGFyZWQvdHlwZXMuc2hhcmVkJztcblxuZGVjbGFyZSBnbG9iYWwge1xuICBpbnRlcmZhY2UgV2luZG93IHtcbiAgICBBbHBpbmU6IGFueTtcbiAgICBtb25hY286IGFueTtcbiAgICByZXF1aXJlOiBhbnk7XG4gICAgbW9uYWNvSW5pdGlhbGl6ZWQ/OiBib29sZWFuO1xuICAgIF9fbW9uYWNvRWRpdG9yPzogYW55OyAvLyBTdG9yZSBlZGl0b3Igb3V0c2lkZSBBbHBpbmUncyByZWFjdGl2aXR5XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRiQ2xpZW50KCk6IERiQ2xpZW50U3RhdGUge1xuICByZXR1cm4ge1xuICAgIHF1ZXJ5OiAnJyxcbiAgICBlZGl0b3I6IG51bGwsIC8vIEtlZXAgZm9yIHR5cGUgY29tcGF0aWJpbGl0eSBidXQgZG9uJ3QgdXNlXG4gICAgc2VsZWN0ZWRUYWJsZTogJycsXG4gICAgYWN0aXZlVGFiOiAnZGF0YScsXG4gICAgaXNDb25uZWN0ZWQ6IHRydWUsXG4gICAgdGFibGVDb3VudDogMCxcbiAgICBhbGxUYWJsZXM6ICcnLFxuICAgIGZpbHRlcmVkVGFibGVzSHRtbDogJzxkaXYgY2xhc3M9XCJsb2FkaW5nXCI+PGRpdiBjbGFzcz1cInNwaW5uZXJcIj48L2Rpdj5Mb2FkaW5nIHRhYmxlcy4uLjwvZGl2PicsXG4gICAgZGF0YVRhYkNvbnRlbnQ6ICc8ZGl2IGNsYXNzPVwiZW1wdHktc3RhdGVcIj48ZGl2IGNsYXNzPVwiZW1wdHktc3RhdGUtaWNvblwiPvCfkYs8L2Rpdj48cD5TZWxlY3QgYSB0YWJsZSBvciBleGVjdXRlIGEgcXVlcnk8L3A+PC9kaXY+JyxcbiAgICBzdHJ1Y3R1cmVUYWJDb250ZW50OiAnJyxcbiAgICBzdHJ1Y3R1cmVMb2FkZWQ6IGZhbHNlLFxuICAgIF9leGVjdXRpbmc6IGZhbHNlLCAvLyBQcmV2ZW50IG11bHRpcGxlIHNpbXVsdGFuZW91cyBleGVjdXRpb25zXG4gICAgY3VycmVudFF1ZXJ5SWQ6IG51bGwsXG4gICAgcXVlcnlTdGF0czogbnVsbCxcblxuICAgIGdldCByZXN1bHRzSHRtbCgpOiBzdHJpbmcge1xuICAgICAgcmV0dXJuIHRoaXMuYWN0aXZlVGFiID09PSAnZGF0YScgPyB0aGlzLmRhdGFUYWJDb250ZW50IDogdGhpcy5zdHJ1Y3R1cmVUYWJDb250ZW50O1xuICAgIH0sXG5cbiAgICBpbml0KCk6IHZvaWQge1xuICAgICAgdGhpcy5sb2FkVGFibGVzKCk7XG4gICAgICAvLyBJbml0aWFsaXplIE1vbmFjbyBhZnRlciBhIHNob3J0IGRlbGF5IHRvIGVuc3VyZSBET00gaXMgcmVhZHlcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5pbml0TW9uYWNvKCksIDMwMCk7XG4gICAgfSxcblxuICAgIGdldENvbm5lY3Rpb25TdHJpbmcoKTogc3RyaW5nIHtcbiAgICAgIGNvbnN0IGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5Jyk7XG4gICAgICByZXR1cm4gYm9keT8uZ2V0QXR0cmlidXRlKCdkYXRhLWNvbm5lY3Rpb24tc3RyaW5nJykgfHwgJ2RlZmF1bHQnO1xuICAgIH0sXG5cbiAgICBnZXRTdG9yYWdlS2V5KCk6IHN0cmluZyB7XG4gICAgICByZXR1cm4gYGRhdGF2b3JlLXF1ZXJ5LSR7dGhpcy5nZXRDb25uZWN0aW9uU3RyaW5nKCl9YDtcbiAgICB9LFxuXG4gICAgc2F2ZVF1ZXJ5VG9Mb2NhbFN0b3JhZ2UocXVlcnk6IHN0cmluZyk6IHZvaWQge1xuICAgICAgdHJ5IHtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0odGhpcy5nZXRTdG9yYWdlS2V5KCksIHF1ZXJ5KTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUud2FybignRmFpbGVkIHRvIHNhdmUgcXVlcnkgdG8gbG9jYWxTdG9yYWdlOicsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgbG9hZFF1ZXJ5RnJvbUxvY2FsU3RvcmFnZSgpOiBzdHJpbmcge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGxvY2FsU3RvcmFnZS5nZXRJdGVtKHRoaXMuZ2V0U3RvcmFnZUtleSgpKSB8fCAnU0VMRUNUICogRlJPTSB0YWJsZV9uYW1lOyc7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLndhcm4oJ0ZhaWxlZCB0byBsb2FkIHF1ZXJ5IGZyb20gbG9jYWxTdG9yYWdlOicsIGVycm9yKTtcbiAgICAgICAgcmV0dXJuICdTRUxFQ1QgKiBGUk9NIHRhYmxlX25hbWU7JztcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgaW5pdE1vbmFjbygpOiB2b2lkIHtcbiAgICAgIC8vIENoZWNrIGlmIGFscmVhZHkgaW5pdGlhbGl6ZWQgZm9yIHRoaXMgaW5zdGFuY2VcbiAgICAgIGlmICh0aGlzLmVkaXRvcikge1xuICAgICAgICBjb25zb2xlLmxvZygnTW9uYWNvIGVkaXRvciBhbHJlYWR5IGluaXRpYWxpemVkJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VkaXRvci1jb250YWluZXInKTtcbiAgICAgIGlmICghY29udGFpbmVyKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0VkaXRvciBjb250YWluZXIgbm90IGZvdW5kJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gQ2hlY2sgaWYgTW9uYWNvIGlzIGFscmVhZHkgbG9hZGVkXG4gICAgICBpZiAod2luZG93Lm1vbmFjbykge1xuICAgICAgICB0aGlzLmNyZWF0ZUVkaXRvcihjb250YWluZXIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gTG9hZCBNb25hY28gaWYgbm90IGFscmVhZHkgbG9hZGVkXG4gICAgICAgIGlmICghd2luZG93Lm1vbmFjb0luaXRpYWxpemVkKSB7XG4gICAgICAgICAgd2luZG93Lm1vbmFjb0luaXRpYWxpemVkID0gdHJ1ZTtcbiAgICAgICAgICB3aW5kb3cucmVxdWlyZS5jb25maWcoe1xuICAgICAgICAgICAgcGF0aHM6IHsgdnM6ICdodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL21vbmFjby1lZGl0b3JAMC40NS4wL21pbi92cycgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gICAgICAgIHdpbmRvdy5yZXF1aXJlKFsndnMvZWRpdG9yL2VkaXRvci5tYWluJ10sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBpZiAoIXdpbmRvdy5tb25hY28pIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ01vbmFjbyBmYWlsZWQgdG8gbG9hZCcpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBzZWxmLmNyZWF0ZUVkaXRvcihjb250YWluZXIpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgY3JlYXRlRWRpdG9yKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpOiB2b2lkIHtcbiAgICAgIC8vIENoZWNrIGlmIGVkaXRvciBhbHJlYWR5IGV4aXN0cyBnbG9iYWxseSAob3V0c2lkZSBBbHBpbmUncyByZWFjdGl2aXR5KVxuICAgICAgaWYgKHdpbmRvdy5fX21vbmFjb0VkaXRvcikge1xuICAgICAgICBjb25zb2xlLmxvZygnTW9uYWNvIGVkaXRvciBhbHJlYWR5IGV4aXN0cycpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgICAgICAgIC8vIExvYWQgc2F2ZWQgcXVlcnkgZnJvbSBsb2NhbFN0b3JhZ2VcbiAgICAgIGNvbnN0IHNhdmVkUXVlcnkgPSB0aGlzLmxvYWRRdWVyeUZyb21Mb2NhbFN0b3JhZ2UoKTtcblxuICAgICAgLy8gQ3JlYXRlIHRoZSBNb25hY28gZWRpdG9yIGluc3RhbmNlIHdpdGggYmV0dGVyIHN0YXRlIG1hbmFnZW1lbnRcbiAgICAgIGNvbnN0IGVkaXRvciA9IHdpbmRvdy5tb25hY28uZWRpdG9yLmNyZWF0ZShjb250YWluZXIsIHtcbiAgICAgICAgdmFsdWU6IHNhdmVkUXVlcnksXG4gICAgICAgIGxhbmd1YWdlOiAnc3FsJyxcbiAgICAgICAgdGhlbWU6ICd2cy1kYXJrJyxcbiAgICAgICAgYXV0b21hdGljTGF5b3V0OiBmYWxzZSwgLy8gQ3JpdGljYWw6IHByZXZlbnRzIGxheW91dCB0aHJhc2hpbmdcbiAgICAgICAgbWluaW1hcDogeyBlbmFibGVkOiBmYWxzZSB9LFxuICAgICAgICBmb250U2l6ZTogMTQsXG4gICAgICAgIGxpbmVOdW1iZXJzOiAnb24nLFxuICAgICAgICByb3VuZGVkU2VsZWN0aW9uOiBmYWxzZSxcbiAgICAgICAgc2Nyb2xsQmV5b25kTGFzdExpbmU6IGZhbHNlLFxuICAgICAgICByZWFkT25seTogZmFsc2UsXG4gICAgICAgIHRhYlNpemU6IDIsXG4gICAgICB9KTtcblxuICAgICAgd2luZG93Ll9fbW9uYWNvRWRpdG9yID0gZWRpdG9yO1xuXG4gICAgICAvLyBBZGQga2V5Ym9hcmQgc2hvcnRjdXQgLSB1c2UgZGlyZWN0IHJlZmVyZW5jZSB0byBhdm9pZCBjbG9zdXJlIGlzc3Vlc1xuICAgICAgZWRpdG9yLmFkZENvbW1hbmQoXG4gICAgICAgIHdpbmRvdy5tb25hY28uS2V5TW9kLkN0cmxDbWQgfCB3aW5kb3cubW9uYWNvLktleUNvZGUuRW50ZXIsXG4gICAgICAgICgpID0+IHtcbiAgICAgICAgICAvLyBHZXQgdGhlIEFscGluZSBjb21wb25lbnQgaW5zdGFuY2UgZnJvbSB0aGUgRE9NXG4gICAgICAgICAgY29uc3QgYWxwaW5lQ29tcG9uZW50ID0gKHdpbmRvdyBhcyBhbnkpLkFscGluZS4kZGF0YShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbeC1kYXRhXScpKTtcbiAgICAgICAgICBpZiAoYWxwaW5lQ29tcG9uZW50ICYmIGFscGluZUNvbXBvbmVudC5leGVjdXRlUXVlcnkpIHtcbiAgICAgICAgICAgIGFscGluZUNvbXBvbmVudC5leGVjdXRlUXVlcnkoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICk7XG5cbiAgICAgIGNvbnNvbGUubG9nKCdNb25hY28gZWRpdG9yIGluaXRpYWxpemVkIHN1Y2Nlc3NmdWxseScpO1xuICAgIH0sXG5cbiAgICBhc3luYyBsb2FkVGFibGVzKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdGhpcy5pc0Nvbm5lY3RlZCA9IHRydWU7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJy9hcGkvdGFibGVzJyk7XG4gICAgICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7XG4gICAgICAgIHRoaXMuYWxsVGFibGVzID0gaHRtbDtcbiAgICAgICAgdGhpcy50YWJsZUNvdW50ID0gKGh0bWwubWF0Y2goL2RhdGEtdGFibGUvZykgfHwgW10pLmxlbmd0aDtcbiAgICAgICAgdGhpcy5maWx0ZXJlZFRhYmxlc0h0bWwgPSB0aGlzLmFsbFRhYmxlcztcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHRoaXMuaXNDb25uZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5maWx0ZXJlZFRhYmxlc0h0bWwgPSAnPGRpdiBjbGFzcz1cImVycm9yXCI+RXJyb3IgbG9hZGluZyB0YWJsZXM8L2Rpdj4nO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBhc3luYyBzZWxlY3RUYWJsZSh0YWJsZU5hbWU6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgdGhpcy5zZWxlY3RlZFRhYmxlID0gdGFibGVOYW1lO1xuICAgICAgdGhpcy5hY3RpdmVUYWIgPSAnZGF0YSc7XG4gICAgICB0aGlzLnN0cnVjdHVyZUxvYWRlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5zdHJ1Y3R1cmVUYWJDb250ZW50ID0gJyc7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIHRoaXMuZGF0YVRhYkNvbnRlbnQgPVxuICAgICAgICAgICc8ZGl2IGNsYXNzPVwibG9hZGluZ1wiPjxkaXYgY2xhc3M9XCJzcGlubmVyXCI+PC9kaXY+TG9hZGluZyB0YWJsZSBkYXRhLi4uPC9kaXY+JztcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnL2FwaS90YWJsZS8nICsgdGFibGVOYW1lKTtcbiAgICAgICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcbiAgICAgICAgdGhpcy5kYXRhVGFiQ29udGVudCA9IGh0bWw7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICB0aGlzLmRhdGFUYWJDb250ZW50ID0gJzxkaXYgY2xhc3M9XCJlcnJvclwiPkVycm9yIGxvYWRpbmcgdGFibGUgZGF0YTwvZGl2Pic7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGFzeW5jIGV4ZWN1dGVRdWVyeSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgIC8vIFVzZSBnbG9iYWwgZWRpdG9yIHJlZmVyZW5jZSBpbnN0ZWFkIG9mIEFscGluZSdzIHJlYWN0aXZlIHByb3BlcnR5XG4gICAgICBjb25zdCBlZGl0b3IgPSB3aW5kb3cuX19tb25hY29FZGl0b3I7XG4gICAgICBpZiAoIWVkaXRvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFZGl0b3Igbm90IGluaXRpYWxpemVkJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gUHJldmVudCBtdWx0aXBsZSBzaW11bHRhbmVvdXMgZXhlY3V0aW9uc1xuICAgICAgaWYgKCh0aGlzIGFzIGFueSkuX2V4ZWN1dGluZykge1xuICAgICAgICBjb25zb2xlLmxvZygnUXVlcnkgYWxyZWFkeSBleGVjdXRpbmcsIHNraXBwaW5nLi4uJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgKHRoaXMgYXMgYW55KS5fZXhlY3V0aW5nID0gdHJ1ZTtcbiAgICAgIHRoaXMuY3VycmVudFF1ZXJ5SWQgPSBgcXVlcnktJHtEYXRlLm5vdygpfS0ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA5KX1gO1xuICAgICAgdGhpcy5xdWVyeVN0YXRzID0gbnVsbDtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gR2V0IHNlbGVjdGVkIHRleHQgb3IgZnVsbCB0ZXh0IGlmIG5vIHNlbGVjdGlvblxuICAgICAgICBjb25zdCBzZWxlY3Rpb24gPSBlZGl0b3IuZ2V0U2VsZWN0aW9uKCk7XG4gICAgICAgIGxldCBxdWVyeVRvRXhlY3V0ZSA9ICcnO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgcXVlcnlUb0V4ZWN1dGUgPSBlZGl0b3IuZ2V0TW9kZWwoKS5nZXRWYWx1ZUluUmFuZ2Uoc2VsZWN0aW9uKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIGNvbnNvbGUud2FybignQ291bGQgbm90IGdldCBzZWxlY3Rpb24sIHVzaW5nIGZ1bGwgY29udGVudCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gSWYgbm8gdGV4dCBpcyBzZWxlY3RlZCAob3Igc2VsZWN0aW9uIGlzIGNvbGxhcHNlZCksIHVzZSBlbnRpcmUgZWRpdG9yIGNvbnRlbnRcbiAgICAgICAgaWYgKCFxdWVyeVRvRXhlY3V0ZS50cmltKCkpIHtcbiAgICAgICAgICBxdWVyeVRvRXhlY3V0ZSA9IGVkaXRvci5nZXRWYWx1ZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFxdWVyeVRvRXhlY3V0ZS50cmltKCkpIHtcbiAgICAgICAgICAodGhpcyBhcyBhbnkpLl9leGVjdXRpbmcgPSBmYWxzZTtcbiAgICAgICAgICB0aGlzLmN1cnJlbnRRdWVyeUlkID0gbnVsbDtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTaG93IGxvYWRpbmcgc3RhdGVcbiAgICAgICAgdGhpcy5kYXRhVGFiQ29udGVudCA9XG4gICAgICAgICAgJzxkaXYgY2xhc3M9XCJsb2FkaW5nXCI+PGRpdiBjbGFzcz1cInNwaW5uZXJcIj48L2Rpdj5FeGVjdXRpbmcgcXVlcnkuLi48L2Rpdj4nO1xuICAgICAgICB0aGlzLmFjdGl2ZVRhYiA9ICdkYXRhJztcblxuICAgICAgICAvLyBFeGVjdXRlIHF1ZXJ5IHdpdGggcXVlcnlJZCBmb3IgY2FuY2VsbGF0aW9uIHN1cHBvcnRcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnL2FwaS9xdWVyeScsIHtcbiAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICBxdWVyeTogcXVlcnlUb0V4ZWN1dGUsXG4gICAgICAgICAgICBxdWVyeUlkOiB0aGlzLmN1cnJlbnRRdWVyeUlkXG4gICAgICAgICAgfSksXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFF1ZXJ5IGZhaWxlZDogJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICB0aGlzLmRhdGFUYWJDb250ZW50ID0gcmVzdWx0Lmh0bWw7XG4gICAgICAgIHRoaXMucXVlcnlTdGF0cyA9IHtcbiAgICAgICAgICBlbGFwc2VkTXM6IHJlc3VsdC5lbGFwc2VkTXMsXG4gICAgICAgICAgcm93Q291bnQ6IHJlc3VsdC5yb3dDb3VudFxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIFNhdmUgdGhlIGVudGlyZSBlZGl0b3IgY29udGVudCB0byBsb2NhbFN0b3JhZ2UgKG5vdCBqdXN0IHRoZSBleGVjdXRlZCBwb3J0aW9uKVxuICAgICAgICB0aGlzLnNhdmVRdWVyeVRvTG9jYWxTdG9yYWdlKGVkaXRvci5nZXRWYWx1ZSgpKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignUXVlcnkgZXhlY3V0aW9uIGVycm9yOicsIGVycm9yKTtcblxuICAgICAgICAvLyBDaGVjayBpZiBpdCB3YXMgYSBjYW5jZWxsYXRpb25cbiAgICAgICAgaWYgKGVycm9yLm5hbWUgPT09ICdBYm9ydEVycm9yJyB8fCBlcnJvci5tZXNzYWdlPy5pbmNsdWRlcygnY2FuY2VsJykpIHtcbiAgICAgICAgICB0aGlzLmRhdGFUYWJDb250ZW50ID0gJzxkaXYgY2xhc3M9XCJpbmZvXCI+UXVlcnkgY2FuY2VsbGVkIGJ5IHVzZXI8L2Rpdj4nO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuZGF0YVRhYkNvbnRlbnQgPVxuICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJlcnJvclwiPlF1ZXJ5IGVycm9yOiAnICsgKGVycm9yLm1lc3NhZ2UgfHwgJ1Vua25vd24gZXJyb3InKSArICc8L2Rpdj4nO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5xdWVyeVN0YXRzID0gbnVsbDtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICh0aGlzIGFzIGFueSkuX2V4ZWN1dGluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmN1cnJlbnRRdWVyeUlkID0gbnVsbDtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgYXN5bmMgY2FuY2VsUXVlcnkoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICBpZiAoIXRoaXMuY3VycmVudFF1ZXJ5SWQpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ05vIGFjdGl2ZSBxdWVyeSB0byBjYW5jZWwnKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCcvYXBpL3F1ZXJ5L2NhbmNlbCcsIHtcbiAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IHF1ZXJ5SWQ6IHRoaXMuY3VycmVudFF1ZXJ5SWQgfSksXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgaWYgKHJlc3VsdC5jYW5jZWxsZWQpIHtcbiAgICAgICAgICB0aGlzLmRhdGFUYWJDb250ZW50ID0gJzxkaXYgY2xhc3M9XCJpbmZvXCI+UXVlcnkgY2FuY2VsbGVkIHN1Y2Nlc3NmdWxseTwvZGl2Pic7XG4gICAgICAgICAgdGhpcy5xdWVyeVN0YXRzID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY2FuY2VsbGluZyBxdWVyeTonLCBlcnJvcik7XG4gICAgICB9XG4gICAgfSxcblxuICAgIHN3aXRjaFRhYih0YWJOYW1lOiAnZGF0YScgfCAnc3RydWN0dXJlJyk6IHZvaWQge1xuICAgICAgdGhpcy5hY3RpdmVUYWIgPSB0YWJOYW1lO1xuICAgICAgaWYgKHRhYk5hbWUgPT09ICdzdHJ1Y3R1cmUnICYmIHRoaXMuc2VsZWN0ZWRUYWJsZSAmJiAhdGhpcy5zdHJ1Y3R1cmVMb2FkZWQpIHtcbiAgICAgICAgdGhpcy5sb2FkU3RydWN0dXJlKCk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGFzeW5jIGxvYWRTdHJ1Y3R1cmUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICB0cnkge1xuICAgICAgICB0aGlzLnN0cnVjdHVyZVRhYkNvbnRlbnQgPVxuICAgICAgICAgICc8ZGl2IGNsYXNzPVwibG9hZGluZ1wiPjxkaXYgY2xhc3M9XCJzcGlubmVyXCI+PC9kaXY+TG9hZGluZyBzdHJ1Y3R1cmUuLi48L2Rpdj4nO1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFxuICAgICAgICAgICcvYXBpL3RhYmxlLycgKyB0aGlzLnNlbGVjdGVkVGFibGUgKyAnL3N0cnVjdHVyZSdcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcbiAgICAgICAgdGhpcy5zdHJ1Y3R1cmVUYWJDb250ZW50ID0gaHRtbDtcbiAgICAgICAgdGhpcy5zdHJ1Y3R1cmVMb2FkZWQgPSB0cnVlO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgdGhpcy5zdHJ1Y3R1cmVUYWJDb250ZW50ID0gJzxkaXYgY2xhc3M9XCJlcnJvclwiPkVycm9yIGxvYWRpbmcgc3RydWN0dXJlPC9kaXY+JztcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgY2xlYXJRdWVyeSgpOiB2b2lkIHtcbiAgICAgIGNvbnN0IGVkaXRvciA9IHdpbmRvdy5fX21vbmFjb0VkaXRvcjtcbiAgICAgIGlmIChlZGl0b3IpIHtcbiAgICAgICAgZWRpdG9yLnNldFZhbHVlKCcnKTtcbiAgICAgIH1cbiAgICB9LFxuICB9O1xufVxuXG4vLyBBdXRvLXJlZ2lzdGVyIHdpdGggQWxwaW5lIHdoZW4gaXQgaW5pdGlhbGl6ZXNcbmlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAvLyBSZWdpc3RlciBpbW1lZGlhdGVseSBpZiBBbHBpbmUgaXMgYWxyZWFkeSBhdmFpbGFibGVcbiAgaWYgKCh3aW5kb3cgYXMgYW55KS5BbHBpbmUpIHtcbiAgICAod2luZG93IGFzIGFueSkuQWxwaW5lLmRhdGEoJ2RiQ2xpZW50JywgZGJDbGllbnQpO1xuICB9IGVsc2Uge1xuICAgIC8vIE90aGVyd2lzZSB3YWl0IGZvciBBbHBpbmUgdG8gaW5pdGlhbGl6ZVxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2FscGluZTppbml0JywgKCkgPT4ge1xuICAgICAgKHdpbmRvdyBhcyBhbnkpLkFscGluZS5kYXRhKCdkYkNsaWVudCcsIGRiQ2xpZW50KTtcbiAgICB9KTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./apps/server/datavore/src/app/client/db-client.client.ts\n");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The require scope
/******/ 	var __webpack_require__ = {};
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval-source-map devtool is used.
/******/ 	var __webpack_exports__ = {};
/******/ 	__webpack_modules__["./apps/server/datavore/src/app/client/db-client.client.ts"](0, __webpack_exports__, __webpack_require__);
/******/ 	
/******/ })()
;